'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var cov_516cyah3v = function () {
  var path = '/Users/shenyunjie/CodeBox/miox/src/miox/src/lib/render.js',
      hash = '50af7a2c0b45ffbdd9d9dcdec3f70dc80487ca3e',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/shenyunjie/CodeBox/miox/src/miox/src/lib/render.js',
    statementMap: {
      '0': {
        start: {
          line: 17,
          column: 19
        },
        end: {
          line: 17,
          column: 35
        }
      },
      '1': {
        start: {
          line: 19,
          column: 17
        },
        end: {
          line: 19,
          column: 35
        }
      },
      '2': {
        start: {
          line: 21,
          column: 15
        },
        end: {
          line: 21,
          column: 59
        }
      },
      '3': {
        start: {
          line: 23,
          column: 31
        },
        end: {
          line: 23,
          column: 56
        }
      },
      '4': {
        start: {
          line: 26,
          column: 19
        },
        end: {
          line: 38,
          column: 3
        }
      },
      '5': {
        start: {
          line: 43,
          column: 2
        },
        end: {
          line: 45,
          column: 3
        }
      },
      '6': {
        start: {
          line: 48,
          column: 2
        },
        end: {
          line: 48,
          column: 56
        }
      },
      '7': {
        start: {
          line: 49,
          column: 2
        },
        end: {
          line: 49,
          column: 56
        }
      },
      '8': {
        start: {
          line: 52,
          column: 2
        },
        end: {
          line: 59,
          column: 5
        }
      },
      '9': {
        start: {
          line: 54,
          column: 6
        },
        end: {
          line: 56,
          column: 7
        }
      },
      '10': {
        start: {
          line: 55,
          column: 8
        },
        end: {
          line: 55,
          column: 66
        }
      },
      '11': {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 16
        }
      },
      '12': {
        start: {
          line: 63,
          column: 37
        },
        end: {
          line: 63,
          column: 60
        }
      },
      '13': {
        start: {
          line: 66,
          column: 73
        },
        end: {
          line: 66,
          column: 94
        }
      },
      '14': {
        start: {
          line: 71,
          column: 2
        },
        end: {
          line: 71,
          column: 57
        }
      },
      '15': {
        start: {
          line: 75,
          column: 2
        },
        end: {
          line: 77,
          column: 3
        }
      },
      '16': {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 76,
          column: 53
        }
      },
      '17': {
        start: {
          line: 81,
          column: 2
        },
        end: {
          line: 83,
          column: 3
        }
      },
      '18': {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 82,
          column: 63
        }
      },
      '19': {
        start: {
          line: 85,
          column: 2
        },
        end: {
          line: 87,
          column: 3
        }
      },
      '20': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 45
        }
      },
      '21': {
        start: {
          line: 107,
          column: 31
        },
        end: {
          line: 107,
          column: 118
        }
      },
      '22': {
        start: {
          line: 110,
          column: 2
        },
        end: {
          line: 110,
          column: 35
        }
      },
      '23': {
        start: {
          line: 114,
          column: 2
        },
        end: {
          line: 223,
          column: 3
        }
      },
      '24': {
        start: {
          line: 115,
          column: 4
        },
        end: {
          line: 115,
          column: 45
        }
      },
      '25': {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 116,
          column: 18
        }
      },
      '26': {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 222,
          column: 5
        }
      },
      '27': {
        start: {
          line: 120,
          column: 8
        },
        end: {
          line: 120,
          column: 22
        }
      },
      '28': {
        start: {
          line: 128,
          column: 8
        },
        end: {
          line: 128,
          column: 85
        }
      },
      '29': {
        start: {
          line: 135,
          column: 8
        },
        end: {
          line: 139,
          column: 9
        }
      },
      '30': {
        start: {
          line: 136,
          column: 10
        },
        end: {
          line: 138,
          column: 11
        }
      },
      '31': {
        start: {
          line: 137,
          column: 12
        },
        end: {
          line: 137,
          column: 52
        }
      },
      '32': {
        start: {
          line: 142,
          column: 37
        },
        end: {
          line: 142,
          column: 79
        }
      },
      '33': {
        start: {
          line: 143,
          column: 8
        },
        end: {
          line: 149,
          column: 9
        }
      },
      '34': {
        start: {
          line: 144,
          column: 10
        },
        end: {
          line: 144,
          column: 60
        }
      },
      '35': {
        start: {
          line: 145,
          column: 10
        },
        end: {
          line: 145,
          column: 51
        }
      },
      '36': {
        start: {
          line: 147,
          column: 10
        },
        end: {
          line: 147,
          column: 51
        }
      },
      '37': {
        start: {
          line: 148,
          column: 10
        },
        end: {
          line: 148,
          column: 51
        }
      },
      '38': {
        start: {
          line: 150,
          column: 8
        },
        end: {
          line: 150,
          column: 14
        }
      },
      '39': {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 157,
          column: 73
        }
      },
      '40': {
        start: {
          line: 157,
          column: 34
        },
        end: {
          line: 157,
          column: 73
        }
      },
      '41': {
        start: {
          line: 158,
          column: 8
        },
        end: {
          line: 158,
          column: 71
        }
      },
      '42': {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 159,
          column: 14
        }
      },
      '43': {
        start: {
          line: 170,
          column: 8
        },
        end: {
          line: 221,
          column: 9
        }
      },
      '44': {
        start: {
          line: 171,
          column: 10
        },
        end: {
          line: 171,
          column: 66
        }
      },
      '45': {
        start: {
          line: 172,
          column: 15
        },
        end: {
          line: 221,
          column: 9
        }
      },
      '46': {
        start: {
          line: 173,
          column: 10
        },
        end: {
          line: 220,
          column: 11
        }
      },
      '47': {
        start: {
          line: 174,
          column: 12
        },
        end: {
          line: 174,
          column: 53
        }
      },
      '48': {
        start: {
          line: 175,
          column: 12
        },
        end: {
          line: 175,
          column: 26
        }
      },
      '49': {
        start: {
          line: 178,
          column: 27
        },
        end: {
          line: 180,
          column: 15
        }
      },
      '50': {
        start: {
          line: 183,
          column: 24
        },
        end: {
          line: 183,
          column: 59
        }
      },
      '51': {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 186,
          column: 37
        }
      },
      '52': {
        start: {
          line: 186,
          column: 27
        },
        end: {
          line: 186,
          column: 37
        }
      },
      '53': {
        start: {
          line: 187,
          column: 12
        },
        end: {
          line: 187,
          column: 70
        }
      },
      '54': {
        start: {
          line: 187,
          column: 42
        },
        end: {
          line: 187,
          column: 70
        }
      },
      '55': {
        start: {
          line: 190,
          column: 34
        },
        end: {
          line: 190,
          column: 59
        }
      },
      '56': {
        start: {
          line: 191,
          column: 32
        },
        end: {
          line: 191,
          column: 56
        }
      },
      '57': {
        start: {
          line: 193,
          column: 12
        },
        end: {
          line: 219,
          column: 13
        }
      },
      '58': {
        start: {
          line: 195,
          column: 34
        },
        end: {
          line: 195,
          column: 60
        }
      },
      '59': {
        start: {
          line: 200,
          column: 14
        },
        end: {
          line: 208,
          column: 15
        }
      },
      '60': {
        start: {
          line: 201,
          column: 16
        },
        end: {
          line: 201,
          column: 29
        }
      },
      '61': {
        start: {
          line: 202,
          column: 16
        },
        end: {
          line: 202,
          column: 53
        }
      },
      '62': {
        start: {
          line: 203,
          column: 21
        },
        end: {
          line: 208,
          column: 15
        }
      },
      '63': {
        start: {
          line: 204,
          column: 16
        },
        end: {
          line: 204,
          column: 30
        }
      },
      '64': {
        start: {
          line: 205,
          column: 16
        },
        end: {
          line: 205,
          column: 57
        }
      },
      '65': {
        start: {
          line: 207,
          column: 16
        },
        end: {
          line: 207,
          column: 70
        }
      },
      '66': {
        start: {
          line: 212,
          column: 14
        },
        end: {
          line: 218,
          column: 15
        }
      },
      '67': {
        start: {
          line: 213,
          column: 16
        },
        end: {
          line: 213,
          column: 29
        }
      },
      '68': {
        start: {
          line: 214,
          column: 16
        },
        end: {
          line: 214,
          column: 53
        }
      },
      '69': {
        start: {
          line: 216,
          column: 16
        },
        end: {
          line: 216,
          column: 30
        }
      },
      '70': {
        start: {
          line: 217,
          column: 16
        },
        end: {
          line: 217,
          column: 57
        }
      },
      '71': {
        start: {
          line: 225,
          column: 2
        },
        end: {
          line: 225,
          column: 43
        }
      },
      '72': {
        start: {
          line: 228,
          column: 2
        },
        end: {
          line: 231,
          column: 5
        }
      },
      '73': {
        start: {
          line: 235,
          column: 2
        },
        end: {
          line: 238,
          column: 3
        }
      },
      '74': {
        start: {
          line: 236,
          column: 4
        },
        end: {
          line: 236,
          column: 52
        }
      },
      '75': {
        start: {
          line: 237,
          column: 4
        },
        end: {
          line: 237,
          column: 34
        }
      },
      '76': {
        start: {
          line: 241,
          column: 2
        },
        end: {
          line: 243,
          column: 3
        }
      },
      '77': {
        start: {
          line: 242,
          column: 4
        },
        end: {
          line: 242,
          column: 66
        }
      },
      '78': {
        start: {
          line: 246,
          column: 2
        },
        end: {
          line: 250,
          column: 4
        }
      },
      '79': {
        start: {
          line: 254,
          column: 2
        },
        end: {
          line: 271,
          column: 3
        }
      },
      '80': {
        start: {
          line: 255,
          column: 4
        },
        end: {
          line: 262,
          column: 5
        }
      },
      '81': {
        start: {
          line: 257,
          column: 8
        },
        end: {
          line: 257,
          column: 72
        }
      },
      '82': {
        start: {
          line: 258,
          column: 8
        },
        end: {
          line: 258,
          column: 14
        }
      },
      '83': {
        start: {
          line: 260,
          column: 8
        },
        end: {
          line: 260,
          column: 44
        }
      },
      '84': {
        start: {
          line: 261,
          column: 8
        },
        end: {
          line: 261,
          column: 14
        }
      },
      '85': {
        start: {
          line: 266,
          column: 4
        },
        end: {
          line: 270,
          column: 5
        }
      },
      '86': {
        start: {
          line: 267,
          column: 6
        },
        end: {
          line: 267,
          column: 32
        }
      },
      '87': {
        start: {
          line: 269,
          column: 6
        },
        end: {
          line: 269,
          column: 41
        }
      },
      '88': {
        start: {
          line: 278,
          column: 2
        },
        end: {
          line: 278,
          column: 49
        }
      },
      '89': {
        start: {
          line: 279,
          column: 2
        },
        end: {
          line: 279,
          column: 49
        }
      },
      '90': {
        start: {
          line: 281,
          column: 2
        },
        end: {
          line: 281,
          column: 32
        }
      },
      '91': {
        start: {
          line: 281,
          column: 16
        },
        end: {
          line: 281,
          column: 32
        }
      },
      '92': {
        start: {
          line: 283,
          column: 2
        },
        end: {
          line: 283,
          column: 45
        }
      },
      '93': {
        start: {
          line: 285,
          column: 2
        },
        end: {
          line: 285,
          column: 32
        }
      },
      '94': {
        start: {
          line: 288,
          column: 18
        },
        end: {
          line: 288,
          column: 46
        }
      },
      '95': {
        start: {
          line: 289,
          column: 4
        },
        end: {
          line: 298,
          column: 5
        }
      },
      '96': {
        start: {
          line: 290,
          column: 24
        },
        end: {
          line: 290,
          column: 32
        }
      },
      '97': {
        start: {
          line: 291,
          column: 22
        },
        end: {
          line: 291,
          column: 39
        }
      },
      '98': {
        start: {
          line: 292,
          column: 25
        },
        end: {
          line: 292,
          column: 48
        }
      },
      '99': {
        start: {
          line: 294,
          column: 6
        },
        end: {
          line: 297,
          column: 7
        }
      },
      '100': {
        start: {
          line: 295,
          column: 8
        },
        end: {
          line: 295,
          column: 42
        }
      },
      '101': {
        start: {
          line: 296,
          column: 8
        },
        end: {
          line: 296,
          column: 33
        }
      },
      '102': {
        start: {
          line: 302,
          column: 4
        },
        end: {
          line: 308,
          column: 7
        }
      },
      '103': {
        start: {
          line: 304,
          column: 8
        },
        end: {
          line: 306,
          column: 9
        }
      },
      '104': {
        start: {
          line: 305,
          column: 10
        },
        end: {
          line: 305,
          column: 44
        }
      },
      '105': {
        start: {
          line: 312,
          column: 4
        },
        end: {
          line: 312,
          column: 56
        }
      },
      '106': {
        start: {
          line: 312,
          column: 34
        },
        end: {
          line: 312,
          column: 56
        }
      },
      '107': {
        start: {
          line: 313,
          column: 12
        },
        end: {
          line: 313,
          column: 27
        }
      },
      '108': {
        start: {
          line: 314,
          column: 4
        },
        end: {
          line: 322,
          column: 5
        }
      },
      '109': {
        start: {
          line: 315,
          column: 22
        },
        end: {
          line: 315,
          column: 33
        }
      },
      '110': {
        start: {
          line: 316,
          column: 20
        },
        end: {
          line: 316,
          column: 55
        }
      },
      '111': {
        start: {
          line: 317,
          column: 6
        },
        end: {
          line: 321,
          column: 7
        }
      },
      '112': {
        start: {
          line: 318,
          column: 8
        },
        end: {
          line: 318,
          column: 53
        }
      },
      '113': {
        start: {
          line: 319,
          column: 8
        },
        end: {
          line: 319,
          column: 58
        }
      },
      '114': {
        start: {
          line: 320,
          column: 8
        },
        end: {
          line: 320,
          column: 38
        }
      },
      '115': {
        start: {
          line: 326,
          column: 19
        },
        end: {
          line: 326,
          column: 37
        }
      },
      '116': {
        start: {
          line: 327,
          column: 17
        },
        end: {
          line: 327,
          column: 35
        }
      },
      '117': {
        start: {
          line: 328,
          column: 18
        },
        end: {
          line: 328,
          column: 33
        }
      },
      '118': {
        start: {
          line: 329,
          column: 4
        },
        end: {
          line: 329,
          column: 57
        }
      },
      '119': {
        start: {
          line: 333,
          column: 28
        },
        end: {
          line: 333,
          column: 62
        }
      },
      '120': {
        start: {
          line: 334,
          column: 4
        },
        end: {
          line: 334,
          column: 40
        }
      },
      '121': {
        start: {
          line: 335,
          column: 4
        },
        end: {
          line: 335,
          column: 43
        }
      },
      '122': {
        start: {
          line: 336,
          column: 4
        },
        end: {
          line: 336,
          column: 47
        }
      },
      '123': {
        start: {
          line: 337,
          column: 4
        },
        end: {
          line: 337,
          column: 44
        }
      },
      '124': {
        start: {
          line: 338,
          column: 4
        },
        end: {
          line: 338,
          column: 27
        }
      },
      '125': {
        start: {
          line: 342,
          column: 4
        },
        end: {
          line: 356,
          column: 7
        }
      },
      '126': {
        start: {
          line: 344,
          column: 8
        },
        end: {
          line: 344,
          column: 43
        }
      },
      '127': {
        start: {
          line: 344,
          column: 34
        },
        end: {
          line: 344,
          column: 43
        }
      },
      '128': {
        start: {
          line: 345,
          column: 21
        },
        end: {
          line: 345,
          column: 50
        }
      },
      '129': {
        start: {
          line: 346,
          column: 23
        },
        end: {
          line: 346,
          column: 41
        }
      },
      '130': {
        start: {
          line: 347,
          column: 8
        },
        end: {
          line: 354,
          column: 9
        }
      },
      '131': {
        start: {
          line: 348,
          column: 23
        },
        end: {
          line: 350,
          column: 30
        }
      },
      '132': {
        start: {
          line: 351,
          column: 10
        },
        end: {
          line: 353,
          column: 11
        }
      },
      '133': {
        start: {
          line: 352,
          column: 12
        },
        end: {
          line: 352,
          column: 29
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 15,
            column: 15
          },
          end: {
            line: 15,
            column: 16
          }
        },
        loc: {
          start: {
            line: 15,
            column: 52
          },
          end: {
            line: 358,
            column: 1
          }
        },
        line: 15
      },
      '1': {
        name: 'resolveEventEmitter',
        decl: {
          start: {
            line: 287,
            column: 17
          },
          end: {
            line: 287,
            column: 36
          }
        },
        loc: {
          start: {
            line: 287,
            column: 45
          },
          end: {
            line: 299,
            column: 3
          }
        },
        line: 287
      },
      '2': {
        name: 'defineWebViewElementGetter',
        decl: {
          start: {
            line: 301,
            column: 11
          },
          end: {
            line: 301,
            column: 37
          }
        },
        loc: {
          start: {
            line: 301,
            column: 54
          },
          end: {
            line: 309,
            column: 3
          }
        },
        line: 301
      },
      '3': {
        name: 'destroyWebViews',
        decl: {
          start: {
            line: 311,
            column: 17
          },
          end: {
            line: 311,
            column: 32
          }
        },
        loc: {
          start: {
            line: 311,
            column: 52
          },
          end: {
            line: 323,
            column: 3
          }
        },
        line: 311
      },
      '4': {
        name: 'insertStacks',
        decl: {
          start: {
            line: 325,
            column: 11
          },
          end: {
            line: 325,
            column: 23
          }
        },
        loc: {
          start: {
            line: 325,
            column: 36
          },
          end: {
            line: 330,
            column: 3
          }
        },
        line: 325
      },
      '5': {
        name: 'createNewCachedWebView',
        decl: {
          start: {
            line: 332,
            column: 17
          },
          end: {
            line: 332,
            column: 39
          }
        },
        loc: {
          start: {
            line: 332,
            column: 42
          },
          end: {
            line: 339,
            column: 3
          }
        },
        line: 332
      },
      '6': {
        name: 'defineWebViewHistoryIndex',
        decl: {
          start: {
            line: 341,
            column: 11
          },
          end: {
            line: 341,
            column: 36
          }
        },
        loc: {
          start: {
            line: 341,
            column: 45
          },
          end: {
            line: 357,
            column: 3
          }
        },
        line: 341
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 21,
            column: 15
          },
          end: {
            line: 21,
            column: 59
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 21,
            column: 36
          },
          end: {
            line: 21,
            column: 48
          }
        }, {
          start: {
            line: 21,
            column: 51
          },
          end: {
            line: 21,
            column: 59
          }
        }],
        line: 21
      },
      '1': {
        loc: {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 29,
            column: 74
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 29,
            column: 6
          },
          end: {
            line: 29,
            column: 67
          }
        }, {
          start: {
            line: 29,
            column: 70
          },
          end: {
            line: 29,
            column: 74
          }
        }],
        line: 28
      },
      '2': {
        loc: {
          start: {
            line: 43,
            column: 2
          },
          end: {
            line: 45,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 43,
            column: 2
          },
          end: {
            line: 45,
            column: 3
          }
        }],
        line: 43
      },
      '3': {
        loc: {
          start: {
            line: 43,
            column: 6
          },
          end: {
            line: 43,
            column: 53
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 43,
            column: 6
          },
          end: {
            line: 43,
            column: 26
          }
        }, {
          start: {
            line: 43,
            column: 30
          },
          end: {
            line: 43,
            column: 53
          }
        }],
        line: 43
      },
      '4': {
        loc: {
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 56,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 56,
            column: 7
          }
        }, {
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 56,
            column: 7
          }
        }],
        line: 54
      },
      '5': {
        loc: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }, {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }],
        line: 75
      },
      '6': {
        loc: {
          start: {
            line: 81,
            column: 2
          },
          end: {
            line: 83,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 81,
            column: 2
          },
          end: {
            line: 83,
            column: 3
          }
        }, {
          start: {
            line: 81,
            column: 2
          },
          end: {
            line: 83,
            column: 3
          }
        }],
        line: 81
      },
      '7': {
        loc: {
          start: {
            line: 85,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 85,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        }, {
          start: {
            line: 85,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        }],
        line: 85
      },
      '8': {
        loc: {
          start: {
            line: 85,
            column: 6
          },
          end: {
            line: 85,
            column: 73
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 85,
            column: 6
          },
          end: {
            line: 85,
            column: 21
          }
        }, {
          start: {
            line: 85,
            column: 25
          },
          end: {
            line: 85,
            column: 73
          }
        }],
        line: 85
      },
      '9': {
        loc: {
          start: {
            line: 107,
            column: 31
          },
          end: {
            line: 107,
            column: 118
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 107,
            column: 31
          },
          end: {
            line: 107,
            column: 57
          }
        }, {
          start: {
            line: 107,
            column: 61
          },
          end: {
            line: 107,
            column: 99
          }
        }, {
          start: {
            line: 107,
            column: 103
          },
          end: {
            line: 107,
            column: 118
          }
        }],
        line: 107
      },
      '10': {
        loc: {
          start: {
            line: 114,
            column: 2
          },
          end: {
            line: 223,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 114,
            column: 2
          },
          end: {
            line: 223,
            column: 3
          }
        }, {
          start: {
            line: 114,
            column: 2
          },
          end: {
            line: 223,
            column: 3
          }
        }],
        line: 114
      },
      '11': {
        loc: {
          start: {
            line: 118,
            column: 4
          },
          end: {
            line: 222,
            column: 5
          }
        },
        type: 'switch',
        locations: [{
          start: {
            line: 119,
            column: 6
          },
          end: {
            line: 150,
            column: 14
          }
        }, {
          start: {
            line: 151,
            column: 6
          },
          end: {
            line: 159,
            column: 14
          }
        }, {
          start: {
            line: 160,
            column: 6
          },
          end: {
            line: 221,
            column: 9
          }
        }],
        line: 118
      },
      '12': {
        loc: {
          start: {
            line: 135,
            column: 8
          },
          end: {
            line: 139,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 135,
            column: 8
          },
          end: {
            line: 139,
            column: 9
          }
        }, {
          start: {
            line: 135,
            column: 8
          },
          end: {
            line: 139,
            column: 9
          }
        }],
        line: 135
      },
      '13': {
        loc: {
          start: {
            line: 136,
            column: 10
          },
          end: {
            line: 138,
            column: 11
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 136,
            column: 10
          },
          end: {
            line: 138,
            column: 11
          }
        }, {
          start: {
            line: 136,
            column: 10
          },
          end: {
            line: 138,
            column: 11
          }
        }],
        line: 136
      },
      '14': {
        loc: {
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 149,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 149,
            column: 9
          }
        }, {
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 149,
            column: 9
          }
        }],
        line: 143
      },
      '15': {
        loc: {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 157,
            column: 73
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 157,
            column: 73
          }
        }, {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 157,
            column: 73
          }
        }],
        line: 157
      },
      '16': {
        loc: {
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 221,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 221,
            column: 9
          }
        }, {
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 221,
            column: 9
          }
        }],
        line: 170
      },
      '17': {
        loc: {
          start: {
            line: 172,
            column: 15
          },
          end: {
            line: 221,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 172,
            column: 15
          },
          end: {
            line: 221,
            column: 9
          }
        }, {
          start: {
            line: 172,
            column: 15
          },
          end: {
            line: 221,
            column: 9
          }
        }],
        line: 172
      },
      '18': {
        loc: {
          start: {
            line: 173,
            column: 10
          },
          end: {
            line: 220,
            column: 11
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 173,
            column: 10
          },
          end: {
            line: 220,
            column: 11
          }
        }, {
          start: {
            line: 173,
            column: 10
          },
          end: {
            line: 220,
            column: 11
          }
        }],
        line: 173
      },
      '19': {
        loc: {
          start: {
            line: 178,
            column: 27
          },
          end: {
            line: 180,
            column: 15
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 179,
            column: 14
          },
          end: {
            line: 179,
            column: 60
          }
        }, {
          start: {
            line: 180,
            column: 14
          },
          end: {
            line: 180,
            column: 15
          }
        }],
        line: 178
      },
      '20': {
        loc: {
          start: {
            line: 179,
            column: 45
          },
          end: {
            line: 179,
            column: 59
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 179,
            column: 45
          },
          end: {
            line: 179,
            column: 54
          }
        }, {
          start: {
            line: 179,
            column: 58
          },
          end: {
            line: 179,
            column: 59
          }
        }],
        line: 179
      },
      '21': {
        loc: {
          start: {
            line: 186,
            column: 12
          },
          end: {
            line: 186,
            column: 37
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 186,
            column: 12
          },
          end: {
            line: 186,
            column: 37
          }
        }, {
          start: {
            line: 186,
            column: 12
          },
          end: {
            line: 186,
            column: 37
          }
        }],
        line: 186
      },
      '22': {
        loc: {
          start: {
            line: 187,
            column: 12
          },
          end: {
            line: 187,
            column: 70
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 187,
            column: 12
          },
          end: {
            line: 187,
            column: 70
          }
        }, {
          start: {
            line: 187,
            column: 12
          },
          end: {
            line: 187,
            column: 70
          }
        }],
        line: 187
      },
      '23': {
        loc: {
          start: {
            line: 193,
            column: 12
          },
          end: {
            line: 219,
            column: 13
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 193,
            column: 12
          },
          end: {
            line: 219,
            column: 13
          }
        }, {
          start: {
            line: 193,
            column: 12
          },
          end: {
            line: 219,
            column: 13
          }
        }],
        line: 193
      },
      '24': {
        loc: {
          start: {
            line: 200,
            column: 14
          },
          end: {
            line: 208,
            column: 15
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 200,
            column: 14
          },
          end: {
            line: 208,
            column: 15
          }
        }, {
          start: {
            line: 200,
            column: 14
          },
          end: {
            line: 208,
            column: 15
          }
        }],
        line: 200
      },
      '25': {
        loc: {
          start: {
            line: 203,
            column: 21
          },
          end: {
            line: 208,
            column: 15
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 203,
            column: 21
          },
          end: {
            line: 208,
            column: 15
          }
        }, {
          start: {
            line: 203,
            column: 21
          },
          end: {
            line: 208,
            column: 15
          }
        }],
        line: 203
      },
      '26': {
        loc: {
          start: {
            line: 212,
            column: 14
          },
          end: {
            line: 218,
            column: 15
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 212,
            column: 14
          },
          end: {
            line: 218,
            column: 15
          }
        }, {
          start: {
            line: 212,
            column: 14
          },
          end: {
            line: 218,
            column: 15
          }
        }],
        line: 212
      },
      '27': {
        loc: {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        }, {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        }],
        line: 235
      },
      '28': {
        loc: {
          start: {
            line: 241,
            column: 2
          },
          end: {
            line: 243,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 241,
            column: 2
          },
          end: {
            line: 243,
            column: 3
          }
        }, {
          start: {
            line: 241,
            column: 2
          },
          end: {
            line: 243,
            column: 3
          }
        }],
        line: 241
      },
      '29': {
        loc: {
          start: {
            line: 254,
            column: 2
          },
          end: {
            line: 271,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 254,
            column: 2
          },
          end: {
            line: 271,
            column: 3
          }
        }, {
          start: {
            line: 254,
            column: 2
          },
          end: {
            line: 271,
            column: 3
          }
        }],
        line: 254
      },
      '30': {
        loc: {
          start: {
            line: 255,
            column: 4
          },
          end: {
            line: 262,
            column: 5
          }
        },
        type: 'switch',
        locations: [{
          start: {
            line: 256,
            column: 6
          },
          end: {
            line: 258,
            column: 14
          }
        }, {
          start: {
            line: 259,
            column: 6
          },
          end: {
            line: 261,
            column: 14
          }
        }],
        line: 255
      },
      '31': {
        loc: {
          start: {
            line: 266,
            column: 4
          },
          end: {
            line: 270,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 266,
            column: 4
          },
          end: {
            line: 270,
            column: 5
          }
        }, {
          start: {
            line: 266,
            column: 4
          },
          end: {
            line: 270,
            column: 5
          }
        }],
        line: 266
      },
      '32': {
        loc: {
          start: {
            line: 266,
            column: 8
          },
          end: {
            line: 266,
            column: 57
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 266,
            column: 8
          },
          end: {
            line: 266,
            column: 26
          }
        }, {
          start: {
            line: 266,
            column: 30
          },
          end: {
            line: 266,
            column: 57
          }
        }],
        line: 266
      },
      '33': {
        loc: {
          start: {
            line: 281,
            column: 2
          },
          end: {
            line: 281,
            column: 32
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 281,
            column: 2
          },
          end: {
            line: 281,
            column: 32
          }
        }, {
          start: {
            line: 281,
            column: 2
          },
          end: {
            line: 281,
            column: 32
          }
        }],
        line: 281
      },
      '34': {
        loc: {
          start: {
            line: 294,
            column: 6
          },
          end: {
            line: 297,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 294,
            column: 6
          },
          end: {
            line: 297,
            column: 7
          }
        }, {
          start: {
            line: 294,
            column: 6
          },
          end: {
            line: 297,
            column: 7
          }
        }],
        line: 294
      },
      '35': {
        loc: {
          start: {
            line: 294,
            column: 10
          },
          end: {
            line: 294,
            column: 39
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 294,
            column: 10
          },
          end: {
            line: 294,
            column: 17
          }
        }, {
          start: {
            line: 294,
            column: 21
          },
          end: {
            line: 294,
            column: 39
          }
        }],
        line: 294
      },
      '36': {
        loc: {
          start: {
            line: 304,
            column: 8
          },
          end: {
            line: 306,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 304,
            column: 8
          },
          end: {
            line: 306,
            column: 9
          }
        }, {
          start: {
            line: 304,
            column: 8
          },
          end: {
            line: 306,
            column: 9
          }
        }],
        line: 304
      },
      '37': {
        loc: {
          start: {
            line: 312,
            column: 4
          },
          end: {
            line: 312,
            column: 56
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 312,
            column: 4
          },
          end: {
            line: 312,
            column: 56
          }
        }, {
          start: {
            line: 312,
            column: 4
          },
          end: {
            line: 312,
            column: 56
          }
        }],
        line: 312
      },
      '38': {
        loc: {
          start: {
            line: 317,
            column: 6
          },
          end: {
            line: 321,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 317,
            column: 6
          },
          end: {
            line: 321,
            column: 7
          }
        }, {
          start: {
            line: 317,
            column: 6
          },
          end: {
            line: 321,
            column: 7
          }
        }],
        line: 317
      },
      '39': {
        loc: {
          start: {
            line: 344,
            column: 8
          },
          end: {
            line: 344,
            column: 43
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 344,
            column: 8
          },
          end: {
            line: 344,
            column: 43
          }
        }, {
          start: {
            line: 344,
            column: 8
          },
          end: {
            line: 344,
            column: 43
          }
        }],
        line: 344
      },
      '40': {
        loc: {
          start: {
            line: 348,
            column: 23
          },
          end: {
            line: 350,
            column: 30
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 349,
            column: 14
          },
          end: {
            line: 349,
            column: 53
          }
        }, {
          start: {
            line: 350,
            column: 14
          },
          end: {
            line: 350,
            column: 30
          }
        }],
        line: 348
      },
      '41': {
        loc: {
          start: {
            line: 348,
            column: 23
          },
          end: {
            line: 348,
            column: 47
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 348,
            column: 23
          },
          end: {
            line: 348,
            column: 29
          }
        }, {
          start: {
            line: 348,
            column: 33
          },
          end: {
            line: 348,
            column: 47
          }
        }],
        line: 348
      },
      '42': {
        loc: {
          start: {
            line: 351,
            column: 10
          },
          end: {
            line: 353,
            column: 11
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 351,
            column: 10
          },
          end: {
            line: 353,
            column: 11
          }
        }, {
          start: {
            line: 351,
            column: 10
          },
          end: {
            line: 353,
            column: 11
          }
        }],
        line: 351
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0,
      '72': 0,
      '73': 0,
      '74': 0,
      '75': 0,
      '76': 0,
      '77': 0,
      '78': 0,
      '79': 0,
      '80': 0,
      '81': 0,
      '82': 0,
      '83': 0,
      '84': 0,
      '85': 0,
      '86': 0,
      '87': 0,
      '88': 0,
      '89': 0,
      '90': 0,
      '91': 0,
      '92': 0,
      '93': 0,
      '94': 0,
      '95': 0,
      '96': 0,
      '97': 0,
      '98': 0,
      '99': 0,
      '100': 0,
      '101': 0,
      '102': 0,
      '103': 0,
      '104': 0,
      '105': 0,
      '106': 0,
      '107': 0,
      '108': 0,
      '109': 0,
      '110': 0,
      '111': 0,
      '112': 0,
      '113': 0,
      '114': 0,
      '115': 0,
      '116': 0,
      '117': 0,
      '118': 0,
      '119': 0,
      '120': 0,
      '121': 0,
      '122': 0,
      '123': 0,
      '124': 0,
      '125': 0,
      '126': 0,
      '127': 0,
      '128': 0,
      '129': 0,
      '130': 0,
      '131': 0,
      '132': 0,
      '133': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0, 0],
      '10': [0, 0],
      '11': [0, 0, 0],
      '12': [0, 0],
      '13': [0, 0],
      '14': [0, 0],
      '15': [0, 0],
      '16': [0, 0],
      '17': [0, 0],
      '18': [0, 0],
      '19': [0, 0],
      '20': [0, 0],
      '21': [0, 0],
      '22': [0, 0],
      '23': [0, 0],
      '24': [0, 0],
      '25': [0, 0],
      '26': [0, 0],
      '27': [0, 0],
      '28': [0, 0],
      '29': [0, 0],
      '30': [0, 0],
      '31': [0, 0],
      '32': [0, 0],
      '33': [0, 0],
      '34': [0, 0],
      '35': [0, 0],
      '36': [0, 0],
      '37': [0, 0],
      '38': [0, 0],
      '39': [0, 0],
      '40': [0, 0],
      '41': [0, 0],
      '42': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}(); /**
      * Created by evio on 2017/8/29.
      * 这是一个最复杂的算法函数，我会尽量注释详细完整
      */


var _animate = require('./animate');

var _animate2 = _interopRequireDefault(_animate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * webview渲染方法
 * @param app
 * @param engine
 * @param webview
 * @param data
 * @returns {Promise.<null>}
 */
exports.default = function () {
  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(app, engine, webview, data) {
    var resolveEventEmitter = function () {
      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(events) {
        var array, i, eventName, _webview, simpleName;

        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                cov_516cyah3v.f[1]++;
                array = (cov_516cyah3v.s[94]++, ['Enter', 'Leave', 'Active']);
                cov_516cyah3v.s[95]++;
                i = 0;

              case 4:
                if (!(i < array.length)) {
                  _context.next = 22;
                  break;
                }

                eventName = (cov_516cyah3v.s[96]++, array[i]);
                _webview = (cov_516cyah3v.s[97]++, events[eventName]);
                simpleName = (cov_516cyah3v.s[98]++, eventName.toLowerCase());
                cov_516cyah3v.s[99]++;

                if (!((cov_516cyah3v.b[35][0]++, _webview) && (cov_516cyah3v.b[35][1]++, engine[simpleName]))) {
                  _context.next = 18;
                  break;
                }

                cov_516cyah3v.b[34][0]++;
                cov_516cyah3v.s[100]++;
                _context.next = 14;
                return engine[simpleName](_webview);

              case 14:
                cov_516cyah3v.s[101]++;

                events[eventName] = null;
                _context.next = 19;
                break;

              case 18:
                cov_516cyah3v.b[34][1]++;

              case 19:
                i++;
                _context.next = 4;
                break;

              case 22:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      return function resolveEventEmitter(_x5) {
        return _ref2.apply(this, arguments);
      };
    }();

    var destroyWebViews = function () {
      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(webviews) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        var i, _webview2, _index, _app$history$stacks;

        return _regenerator2.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                cov_516cyah3v.f[3]++;
                cov_516cyah3v.s[105]++;

                if (!Array.isArray(webviews)) {
                    cov_516cyah3v.b[37][0]++;
                    cov_516cyah3v.s[106]++;
                    webviews = [webviews];
                  } else {
                  cov_516cyah3v.b[37][1]++;
                }i = (cov_516cyah3v.s[107]++, webviews.length);
                cov_516cyah3v.s[108]++;

              case 5:
                if (!i--) {
                  _context2.next = 23;
                  break;
                }

                _webview2 = (cov_516cyah3v.s[109]++, webviews[i]);
                _index = (cov_516cyah3v.s[110]++, app.history.stacks.indexOf(_webview2));
                cov_516cyah3v.s[111]++;

                if (!(_index > -1)) {
                  _context2.next = 20;
                  break;
                }

                cov_516cyah3v.b[38][0]++;
                cov_516cyah3v.s[112]++;

                (_app$history$stacks = app.history.stacks).splice.apply(_app$history$stacks, [_index, 1].concat(args));
                cov_516cyah3v.s[113]++;
                _webview2.constructor.dic.del(_webview2.__MioxMark__);
                cov_516cyah3v.s[114]++;
                _context2.next = 18;
                return engine.destroy(_webview2);

              case 18:
                _context2.next = 21;
                break;

              case 20:
                cov_516cyah3v.b[38][1]++;

              case 21:
                _context2.next = 5;
                break;

              case 23:
              case 'end':
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      return function destroyWebViews(_x6) {
        return _ref3.apply(this, arguments);
      };
    }();

    var createNewCachedWebView = function () {
      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
        var newCacheWebView;
        return _regenerator2.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                cov_516cyah3v.f[5]++;
                cov_516cyah3v.s[119]++;
                _context3.next = 4;
                return engine.create(webview, data);

              case 4:
                newCacheWebView = _context3.sent;
                cov_516cyah3v.s[120]++;

                newCacheWebView.__MioxMark__ = mark;
                cov_516cyah3v.s[121]++;
                webview.dic.set(mark, newCacheWebView);
                cov_516cyah3v.s[122]++;
                defineWebViewHistoryIndex(newCacheWebView);
                cov_516cyah3v.s[123]++;
                webViews.events.Enter = newCacheWebView;
                cov_516cyah3v.s[124]++;
                return _context3.abrupt('return', newCacheWebView);

              case 15:
              case 'end':
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      return function createNewCachedWebView() {
        return _ref4.apply(this, arguments);
      };
    }();

    var pathname, action, mark, existsWebViewConfigs, webViews, oldCacheWebViewConstructor, oldCacheWebView, pushWebViewExtras, remindExtra, newCacheWebView, oldCacheChangeStatus, newCacheWebViewIndex, reduce, index, targetWebView, sourceIndex, targetIndex, defineWebViewElementGetter, insertStacks, defineWebViewHistoryIndex;
    return _regenerator2.default.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            defineWebViewHistoryIndex = function defineWebViewHistoryIndex(object) {
              cov_516cyah3v.f[6]++;
              cov_516cyah3v.s[125]++;

              Object.defineProperty(object, 'historyIndex', {
                get: function get() {
                  cov_516cyah3v.s[126]++;

                  if (!app.history.session) {
                      cov_516cyah3v.b[39][0]++;
                      cov_516cyah3v.s[127]++;
                      return 0;
                    } else {
                    cov_516cyah3v.b[39][1]++;
                  }var vars = (cov_516cyah3v.s[128]++, app.history.session.variables);
                  var strict = (cov_516cyah3v.s[129]++, app.options.strict);
                  cov_516cyah3v.s[130]++;
                  for (var i in vars) {
                    var _mark = (cov_516cyah3v.s[131]++, (cov_516cyah3v.b[41][0]++, strict) && (cov_516cyah3v.b[41][1]++, vars[i].search) ? (cov_516cyah3v.b[40][0]++, vars[i].pathname + ':' + vars[i].search) : (cov_516cyah3v.b[40][1]++, vars[i].pathname));
                    cov_516cyah3v.s[132]++;
                    if (_mark === object.__MioxMark__) {
                      cov_516cyah3v.b[42][0]++;
                      cov_516cyah3v.s[133]++;

                      return Number(i);
                    } else {
                      cov_516cyah3v.b[42][1]++;
                    }
                  }
                }
              });
            };

            insertStacks = function insertStacks(i) {
              cov_516cyah3v.f[4]++;

              var stacks = (cov_516cyah3v.s[115]++, app.history.stacks);
              var left = (cov_516cyah3v.s[116]++, stacks.slice(0, i));
              var right = (cov_516cyah3v.s[117]++, stacks.slice(i));
              cov_516cyah3v.s[118]++;

              for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                args[_key2 - 1] = arguments[_key2];
              }

              app.history.stacks = left.concat(args).concat(right);
            };

            defineWebViewElementGetter = function defineWebViewElementGetter(webViews, name) {
              cov_516cyah3v.f[2]++;
              cov_516cyah3v.s[102]++;

              Object.defineProperty(webViews, name + 'Element', {
                get: function get() {
                  cov_516cyah3v.s[103]++;

                  if (this[name]) {
                    cov_516cyah3v.b[36][0]++;
                    cov_516cyah3v.s[104]++;

                    return engine.element(this[name]);
                  } else {
                    cov_516cyah3v.b[36][1]++;
                  }
                }
              });
            };

            cov_516cyah3v.f[0]++;

            // 当前URL的路径
            pathname = (cov_516cyah3v.s[0]++, app.req.pathname);
            // 当前行为方式

            action = (cov_516cyah3v.s[1]++, app.history.action);
            // 当前URI标识

            mark = (cov_516cyah3v.s[2]++, app.options.strict ? (cov_516cyah3v.b[0][0]++, app.req.mark) : (cov_516cyah3v.b[0][1]++, pathname));
            // 当前显示在页面上行的关键数据 { basic, mark } 组合

            existsWebViewConfigs = (cov_516cyah3v.s[3]++, app.get('exists-webview'));

            //临时数据变量

            webViews = (cov_516cyah3v.s[4]++, {
              // 当前显示页面的实例
              existsWebView: existsWebViewConfigs ? (cov_516cyah3v.b[1][0]++, existsWebViewConfigs.basic.dic.get(existsWebViewConfigs.mark)) : (cov_516cyah3v.b[1][1]++, null),
              // 被激活的页面实例
              activeWebView: null,
              // 事件
              events: {
                Active: null,
                Enter: null,
                Leave: null
              }
            });

            // 当行为为`replace`，但是当前现实页面的构造体不存在
            // 我们应该抛出错误 `replace method need a existing webview`
            /* istanbul ignore if */

            cov_516cyah3v.s[5]++;

            if (!((cov_516cyah3v.b[3][0]++, action === 'replace') && (cov_516cyah3v.b[3][1]++, !webViews.existsWebView))) {
              _context4.next = 14;
              break;
            }

            throw new Error('replace method need a existing webview');

          case 14:
            cov_516cyah3v.b[2][0]++;

          case 15:
            cov_516cyah3v.s[6]++;


            // 设置构造体对应的节点获取对象
            defineWebViewElementGetter(webViews, 'existsWebView');
            cov_516cyah3v.s[7]++;
            defineWebViewElementGetter(webViews, 'activeWebView');

            // 当前显示页面在内存Stacks中的索引
            cov_516cyah3v.s[8]++;
            Object.defineProperty(webViews, 'existWebViewIndex', {
              get: function get() {
                cov_516cyah3v.s[9]++;

                if (webViews.existsWebView) {
                  cov_516cyah3v.b[4][0]++;
                  cov_516cyah3v.s[10]++;

                  return app.history.stacks.indexOf(webViews.existsWebView);
                } else {
                  cov_516cyah3v.b[4][1]++;
                }
                cov_516cyah3v.s[11]++;
                return -1;
              }
            });

            // 从cache中找出当前路径对应的构造体
            // 用来对比前后是否同一构造体
            oldCacheWebViewConstructor = (cov_516cyah3v.s[12]++, app.cache.get(pathname));
            // oldCacheWebView: 从缓存中拿到的老的页面实例
            // newCacheWebView: 从缓存中拿到的新的页面实例

            oldCacheWebView = void 0, pushWebViewExtras = void 0, remindExtra = void 0, newCacheWebView = (cov_516cyah3v.s[13]++, webview.dic.get(mark));

            // 每次进入前触发`webview:beforeEnter`事件
            // newCacheWebView可能不存在 
            // 如果存在，必定表示是从缓存中拿到的

            cov_516cyah3v.s[14]++;
            _context4.next = 26;
            return app.emit('webview:beforeEnter', newCacheWebView);

          case 26:
            cov_516cyah3v.s[15]++;

            if (newCacheWebView) {
              _context4.next = 35;
              break;
            }

            cov_516cyah3v.b[5][0]++;
            cov_516cyah3v.s[16]++;
            _context4.next = 32;
            return createNewCachedWebView();

          case 32:
            newCacheWebView = _context4.sent;
            _context4.next = 36;
            break;

          case 35:
            cov_516cyah3v.b[5][1]++;

          case 36:
            cov_516cyah3v.s[17]++;


            // 如果有老的构造体
            // 尝试从老的构造体中拿到当前路径对应的实例
            if (oldCacheWebViewConstructor) {
              cov_516cyah3v.b[6][0]++;
              cov_516cyah3v.s[18]++;

              oldCacheWebView = oldCacheWebViewConstructor.dic.get(mark);
            } else {
              cov_516cyah3v.b[6][1]++;
            }

            cov_516cyah3v.s[19]++;
            if ((cov_516cyah3v.b[8][0]++, newCacheWebView) && (cov_516cyah3v.b[8][1]++, app.history.stacks.indexOf(newCacheWebView) > -1)) {
              cov_516cyah3v.b[7][0]++;
              cov_516cyah3v.s[20]++;

              webViews.events.Active = newCacheWebView;
            } else {
              cov_516cyah3v.b[7][1]++;
            }

            /**
             * 此时我们应该非常注意一下参数：
             * newCacheWebView: 从缓存中尝试拿到的新页面实例
             * oldCacheWebView: 从缓存中尝试拿到的老页面实例
             * 
             * 理解这些参数后对之后的算法有更好的理解
             * 我们的理念是尽最大可能去复用页面实例
             * 减少页面的额外渲染成本 让体验更加流畅
             * 
             * 同时需要注意一个最远距离概念
             * `app.tick` 最远距离操作标识
             * 
             * app.tick = -1 删除第一个内存堆栈元素
             * app.tick = 1  删除最后一个内存堆栈元素
             */

            // oldCacheChangeStatus: 判断当前渲染是否基于特殊的不同的构造体渲染
            // 如果我们发现这个值为真，那么我们需要将老的构造体删除，同时对相关的页面实例进行destroy操作。
            oldCacheChangeStatus = (cov_516cyah3v.s[21]++, (cov_516cyah3v.b[9][0]++, oldCacheWebViewConstructor) && (cov_516cyah3v.b[9][1]++, oldCacheWebViewConstructor !== webview) && (cov_516cyah3v.b[9][2]++, oldCacheWebView));

            // 将新的构造体覆盖老的构造体

            cov_516cyah3v.s[22]++;
            app.cache.set(pathname, webview);

            // 当我们发现内存堆栈中没有任何数据
            // 那么直接添加即可，无需其他处理
            cov_516cyah3v.s[23]++;

            if (!(app.history.stacks.length === 0)) {
              _context4.next = 52;
              break;
            }

            cov_516cyah3v.b[10][0]++;
            cov_516cyah3v.s[24]++;

            app.history.stacks.push(newCacheWebView);
            cov_516cyah3v.s[25]++;
            app.tick = -1;
            _context4.next = 164;
            break;

          case 52:
            cov_516cyah3v.b[10][1]++;
            cov_516cyah3v.s[26]++;
            _context4.t0 = action;
            _context4.next = _context4.t0 === 'push' ? 57 : _context4.t0 === 'replace' ? 83 : 98;
            break;

          case 57:
            cov_516cyah3v.b[11][0]++;
            cov_516cyah3v.s[27]++;

            app.tick = -1;

            /**
             * `PUSH`行为，根据浏览器规则，永远是将之后的删除，推入新的数据
             * 那么对于模拟的内存堆栈，我们也应该将其之后的所有压入到待删除队列中去 `pushWebViewExtras`
             * 需要注意的是，newCacheWebView可能是从缓存中拿到的，所以需要判断是否newCacheWebView在删除队列中
             * 如果存在其中，需要从删除队列中抛弃掉newCacheWebView
             */
            cov_516cyah3v.s[28]++;
            pushWebViewExtras = app.history.stacks.slice(webViews.existWebViewIndex + 1);

            /**
             * 判断老的实例：
             * 如果oldCacheChangeStatus状态为真，说明是一种不同webview的渲染
             * 我们需要从删除堆栈中判断是否存在oldCacheWebView
             */
            cov_516cyah3v.s[29]++;
            if (oldCacheChangeStatus) {
              cov_516cyah3v.b[12][0]++;
              cov_516cyah3v.s[30]++;

              if (pushWebViewExtras.indexOf(oldCacheWebView) === -1) {
                cov_516cyah3v.b[13][0]++;
                cov_516cyah3v.s[31]++;

                pushWebViewExtras.push(oldCacheWebView);
              } else {
                cov_516cyah3v.b[13][1]++;
              }
            } else {
              cov_516cyah3v.b[12][1]++;
            }

            // 判断新的实例：
            newCacheWebViewIndex = (cov_516cyah3v.s[32]++, pushWebViewExtras.indexOf(newCacheWebView));
            cov_516cyah3v.s[33]++;

            if (!(newCacheWebViewIndex > -1)) {
              _context4.next = 75;
              break;
            }

            cov_516cyah3v.b[14][0]++;
            cov_516cyah3v.s[34]++;

            pushWebViewExtras.splice(newCacheWebViewIndex, 1);
            cov_516cyah3v.s[35]++;
            _context4.next = 73;
            return destroyWebViews(pushWebViewExtras);

          case 73:
            _context4.next = 81;
            break;

          case 75:
            cov_516cyah3v.b[14][1]++;
            cov_516cyah3v.s[36]++;
            _context4.next = 79;
            return destroyWebViews(pushWebViewExtras);

          case 79:
            cov_516cyah3v.s[37]++;

            app.history.stacks.push(newCacheWebView);

          case 81:
            cov_516cyah3v.s[38]++;
            return _context4.abrupt('break', 164);

          case 83:
            cov_516cyah3v.b[11][1]++;
            cov_516cyah3v.s[39]++;

            if (!oldCacheChangeStatus) {
              _context4.next = 92;
              break;
            }

            cov_516cyah3v.b[15][0]++;
            cov_516cyah3v.s[40]++;
            _context4.next = 90;
            return destroyWebViews(oldCacheWebView);

          case 90:
            _context4.next = 93;
            break;

          case 92:
            cov_516cyah3v.b[15][1]++;

          case 93:
            cov_516cyah3v.s[41]++;
            _context4.next = 96;
            return destroyWebViews(webViews.existsWebView, newCacheWebView);

          case 96:
            cov_516cyah3v.s[42]++;
            return _context4.abrupt('break', 164);

          case 98:
            cov_516cyah3v.b[11][2]++;
            cov_516cyah3v.s[43]++;

            if (!oldCacheChangeStatus) {
              _context4.next = 107;
              break;
            }

            cov_516cyah3v.b[16][0]++;
            cov_516cyah3v.s[44]++;
            _context4.next = 105;
            return destroyWebViews(oldCacheWebView, newCacheWebView);

          case 105:
            _context4.next = 164;
            break;

          case 107:
            cov_516cyah3v.b[16][1]++;
            cov_516cyah3v.s[45]++;

            if (!(app.history.stacks.indexOf(newCacheWebView) === -1)) {
              _context4.next = 163;
              break;
            }

            cov_516cyah3v.b[17][0]++;
            cov_516cyah3v.s[46]++;

            if (!(app.history.direction === 0)) {
              _context4.next = 120;
              break;
            }

            cov_516cyah3v.b[18][0]++;
            cov_516cyah3v.s[47]++;

            app.history.stacks.push(newCacheWebView);
            cov_516cyah3v.s[48]++;
            app.tick = -1;
            _context4.next = 161;
            break;

          case 120:
            cov_516cyah3v.b[18][1]++;

            // reduce: 从session的当前索引移步到现在需要达到的索引的时候需要的步数
            reduce = (cov_516cyah3v.s[49]++, app.history.session ? (cov_516cyah3v.b[19][0]++, app.history.session.current - ((cov_516cyah3v.b[20][0]++, app.index) || (cov_516cyah3v.b[20][1]++, 0))) : (cov_516cyah3v.b[19][1]++, 0));

            // 得到移动步数后同步到当前内存中一致步数所得到值为最终的移动索引

            index = (cov_516cyah3v.s[50]++, webViews.existWebViewIndex - reduce);

            // 越界处理

            cov_516cyah3v.s[51]++;
            if (index < 0) {
                cov_516cyah3v.b[21][0]++;
                cov_516cyah3v.s[52]++;
                index = 0;
              } else {
              cov_516cyah3v.b[21][1]++;
            }cov_516cyah3v.s[53]++;
            if (index >= app.options.max) {
                cov_516cyah3v.b[22][0]++;
                cov_516cyah3v.s[54]++;
                index = app.options.max - 1;
              } else {
              cov_516cyah3v.b[22][1]++;
            } // 移动到最终到达点的所以对应的页面实例
            targetWebView = (cov_516cyah3v.s[55]++, app.history.stacks[index]);
            sourceIndex = (cov_516cyah3v.s[56]++, app.webView.historyIndex);
            cov_516cyah3v.s[57]++;

            if (!targetWebView) {
              _context4.next = 158;
              break;
            }

            cov_516cyah3v.b[23][0]++;

            // 获取对应页面所在的历史记录索引
            targetIndex = (cov_516cyah3v.s[58]++, targetWebView.historyIndex);
            // 如果当前所在索引 - 步数 < 对应所在索引
            // 那么可以认定将插入到index之前
            // 否则插入到index之后
            // 无论方向与否，都是一直的表现

            cov_516cyah3v.s[59]++;

            if (!(sourceIndex - reduce < targetIndex)) {
              _context4.next = 142;
              break;
            }

            cov_516cyah3v.b[24][0]++;
            cov_516cyah3v.s[60]++;

            app.tick = 1;
            cov_516cyah3v.s[61]++;
            insertStacks(index, newCacheWebView);
            _context4.next = 156;
            break;

          case 142:
            cov_516cyah3v.b[24][1]++;
            cov_516cyah3v.s[62]++;

            if (!(sourceIndex - reduce > targetIndex)) {
              _context4.next = 152;
              break;
            }

            cov_516cyah3v.b[25][0]++;
            cov_516cyah3v.s[63]++;

            app.tick = -1;
            cov_516cyah3v.s[64]++;
            insertStacks(index + 1, newCacheWebView);
            _context4.next = 156;
            break;

          case 152:
            cov_516cyah3v.b[25][1]++;
            cov_516cyah3v.s[65]++;
            _context4.next = 156;
            return destroyWebViews(targetWebView, newCacheWebView);

          case 156:
            _context4.next = 161;
            break;

          case 158:
            cov_516cyah3v.b[23][1]++;
            cov_516cyah3v.s[66]++;

            // 当对应的页面实例不存在
            // 说明是一种刷新页面行为
            if (app.history.direction < 0) {
              cov_516cyah3v.b[26][0]++;
              cov_516cyah3v.s[67]++;

              app.tick = 1;
              cov_516cyah3v.s[68]++;
              insertStacks(index, newCacheWebView);
            } else {
              cov_516cyah3v.b[26][1]++;
              cov_516cyah3v.s[69]++;

              app.tick = -1;
              cov_516cyah3v.s[70]++;
              insertStacks(index + 1, newCacheWebView);
            }

          case 161:
            _context4.next = 164;
            break;

          case 163:
            cov_516cyah3v.b[17][1]++;

          case 164:
            cov_516cyah3v.s[71]++;


            webViews.activeWebView = newCacheWebView;

            // 当前激活在页面上行的关键数据 { basic, mark } 组合
            cov_516cyah3v.s[72]++;
            app.set('active-webview', {
              basic: webview,
              mark: mark
            });

            // SSR的client端渲染的时候，在没有mounted情况下，取不到节点；
            // 那么直接返回，不做任何动画。
            cov_516cyah3v.s[73]++;

            if (webViews.activeWebViewElement) {
              _context4.next = 178;
              break;
            }

            cov_516cyah3v.b[27][0]++;
            cov_516cyah3v.s[74]++;
            _context4.next = 174;
            return resolveEventEmitter(app, webViews.events);

          case 174:
            cov_516cyah3v.s[75]++;
            return _context4.abrupt('return', webViews.activeWebView);

          case 178:
            cov_516cyah3v.b[27][1]++;

          case 179:
            cov_516cyah3v.s[76]++;

            if (!webViews.existsWebViewElement) {
              _context4.next = 187;
              break;
            }

            cov_516cyah3v.b[28][0]++;
            cov_516cyah3v.s[77]++;
            _context4.next = 185;
            return app.emit('webview:beforeLeave', webViews.existsWebView);

          case 185:
            _context4.next = 188;
            break;

          case 187:
            cov_516cyah3v.b[28][1]++;

          case 188:
            cov_516cyah3v.s[78]++;
            _context4.next = 191;
            return (0, _animate2.default)(app, webViews.existsWebViewElement, webViews.activeWebViewElement);

          case 191:
            cov_516cyah3v.s[79]++;

            if (!(app.history.stacks.length > app.options.max)) {
              _context4.next = 221;
              break;
            }

            cov_516cyah3v.b[29][0]++;
            cov_516cyah3v.s[80]++;
            _context4.t1 = app.tick;
            _context4.next = _context4.t1 === 1 ? 198 : _context4.t1 === -1 ? 203 : 208;
            break;

          case 198:
            cov_516cyah3v.b[30][0]++;
            cov_516cyah3v.s[81]++;

            remindExtra = app.history.stacks[app.history.stacks.length - 1];
            cov_516cyah3v.s[82]++;
            return _context4.abrupt('break', 208);

          case 203:
            cov_516cyah3v.b[30][1]++;
            cov_516cyah3v.s[83]++;

            remindExtra = app.history.stacks[0];
            cov_516cyah3v.s[84]++;
            return _context4.abrupt('break', 208);

          case 208:
            cov_516cyah3v.s[85]++;

            if (!((cov_516cyah3v.b[32][0]++, app.redirectAction) && (cov_516cyah3v.b[32][1]++, app.webView === remindExtra))) {
              _context4.next = 215;
              break;
            }

            cov_516cyah3v.b[31][0]++;
            cov_516cyah3v.s[86]++;

            delete app.redirectAction;
            _context4.next = 219;
            break;

          case 215:
            cov_516cyah3v.b[31][1]++;
            cov_516cyah3v.s[87]++;
            _context4.next = 219;
            return destroyWebViews(remindExtra);

          case 219:
            _context4.next = 222;
            break;

          case 221:
            cov_516cyah3v.b[29][1]++;

          case 222:
            cov_516cyah3v.s[88]++;


            /**
             * 此时我们可以完全认定，
             * 离开的对象是webViews.existsWebView
             * 进入的对象是webViews.activeWebView
             */
            webViews.events.Leave = webViews.existsWebView;
            cov_516cyah3v.s[89]++;
            webViews.events.Enter = webViews.activeWebView;

            cov_516cyah3v.s[90]++;
            if (app.tick) {
                cov_516cyah3v.b[33][0]++;
                cov_516cyah3v.s[91]++;
                delete app.tick;
              } else {
              cov_516cyah3v.b[33][1]++;
            } // 触发额外事件
            cov_516cyah3v.s[92]++;
            _context4.next = 231;
            return resolveEventEmitter(webViews.events);

          case 231:
            cov_516cyah3v.s[93]++;
            return _context4.abrupt('return', webViews.activeWebView);

          case 233:
          case 'end':
            return _context4.stop();
        }
      }
    }, _callee4, undefined);
  }));

  return function (_x, _x2, _x3, _x4) {
    return _ref.apply(this, arguments);
  };
}();

module.exports = exports['default'];