'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var cov_65jdi4oxd = function () {
  var path = '/Users/shenyunjie/CodeBox/miox/src/miox/src/lib/index.js',
      hash = 'e81abbcd8d55952e440b961da86c3d3e8c8503a4',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/shenyunjie/CodeBox/miox/src/miox/src/lib/index.js',
    statementMap: {
      '0': {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 42
        }
      },
      '1': {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 27,
          column: 12
        }
      },
      '2': {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 34,
          column: 7
        }
      },
      '3': {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 36,
          column: 45
        }
      },
      '4': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 37,
          column: 33
        }
      },
      '5': {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 38,
          column: 34
        }
      },
      '6': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 35
        }
      },
      '7': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 27
        }
      },
      '8': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 20
        }
      },
      '9': {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 23
        }
      },
      '10': {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 43,
          column: 31
        }
      },
      '11': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 28
        }
      },
      '12': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 29
        }
      },
      '13': {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 47,
          column: 37
        }
      },
      '14': {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 48,
          column: 37
        }
      },
      '15': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 75
        }
      },
      '16': {
        start: {
          line: 50,
          column: 31
        },
        end: {
          line: 50,
          column: 75
        }
      },
      '17': {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 52,
          column: 65
        }
      },
      '18': {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 53,
          column: 67
        }
      },
      '19': {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 66,
          column: 34
        }
      },
      '20': {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 69,
          column: 34
        }
      },
      '21': {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 88,
          column: 44
        }
      },
      '22': {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 91,
          column: 47
        }
      },
      '23': {
        start: {
          line: 94,
          column: 4
        },
        end: {
          line: 94,
          column: 42
        }
      },
      '24': {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 102,
          column: 31
        }
      },
      '25': {
        start: {
          line: 105,
          column: 4
        },
        end: {
          line: 105,
          column: 32
        }
      },
      '26': {
        start: {
          line: 108,
          column: 4
        },
        end: {
          line: 108,
          column: 24
        }
      },
      '27': {
        start: {
          line: 128,
          column: 26
        },
        end: {
          line: 128,
          column: 52
        }
      },
      '28': {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 131,
          column: 5
        }
      },
      '29': {
        start: {
          line: 130,
          column: 6
        },
        end: {
          line: 130,
          column: 61
        }
      },
      '30': {
        start: {
          line: 145,
          column: 20
        },
        end: {
          line: 145,
          column: 46
        }
      },
      '31': {
        start: {
          line: 146,
          column: 4
        },
        end: {
          line: 149,
          column: 5
        }
      },
      '32': {
        start: {
          line: 147,
          column: 6
        },
        end: {
          line: 147,
          column: 42
        }
      },
      '33': {
        start: {
          line: 148,
          column: 6
        },
        end: {
          line: 148,
          column: 39
        }
      },
      '34': {
        start: {
          line: 153,
          column: 20
        },
        end: {
          line: 153,
          column: 32
        }
      },
      '35': {
        start: {
          line: 155,
          column: 4
        },
        end: {
          line: 160,
          column: 5
        }
      },
      '36': {
        start: {
          line: 156,
          column: 6
        },
        end: {
          line: 158,
          column: 7
        }
      },
      '37': {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 157,
          column: 56
        }
      },
      '38': {
        start: {
          line: 159,
          column: 6
        },
        end: {
          line: 159,
          column: 48
        }
      },
      '39': {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 165,
          column: 5
        }
      },
      '40': {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 163,
          column: 28
        }
      },
      '41': {
        start: {
          line: 164,
          column: 6
        },
        end: {
          line: 164,
          column: 22
        }
      },
      '42': {
        start: {
          line: 166,
          column: 4
        },
        end: {
          line: 166,
          column: 23
        }
      },
      '43': {
        start: {
          line: 170,
          column: 4
        },
        end: {
          line: 181,
          column: 5
        }
      },
      '44': {
        start: {
          line: 171,
          column: 6
        },
        end: {
          line: 171,
          column: 23
        }
      },
      '45': {
        start: {
          line: 173,
          column: 6
        },
        end: {
          line: 177,
          column: 7
        }
      },
      '46': {
        start: {
          line: 176,
          column: 8
        },
        end: {
          line: 176,
          column: 51
        }
      },
      '47': {
        start: {
          line: 179,
          column: 6
        },
        end: {
          line: 179,
          column: 22
        }
      },
      '48': {
        start: {
          line: 180,
          column: 6
        },
        end: {
          line: 180,
          column: 43
        }
      },
      '49': {
        start: {
          line: 190,
          column: 4
        },
        end: {
          line: 190,
          column: 27
        }
      },
      '50': {
        start: {
          line: 190,
          column: 20
        },
        end: {
          line: 190,
          column: 27
        }
      },
      '51': {
        start: {
          line: 191,
          column: 4
        },
        end: {
          line: 191,
          column: 22
        }
      },
      '52': {
        start: {
          line: 194,
          column: 4
        },
        end: {
          line: 194,
          column: 73
        }
      },
      '53': {
        start: {
          line: 195,
          column: 4
        },
        end: {
          line: 195,
          column: 41
        }
      },
      '54': {
        start: {
          line: 196,
          column: 4
        },
        end: {
          line: 196,
          column: 48
        }
      },
      '55': {
        start: {
          line: 197,
          column: 4
        },
        end: {
          line: 199,
          column: 5
        }
      },
      '56': {
        start: {
          line: 198,
          column: 6
        },
        end: {
          line: 198,
          column: 58
        }
      },
      '57': {
        start: {
          line: 201,
          column: 4
        },
        end: {
          line: 201,
          column: 37
        }
      },
      '58': {
        start: {
          line: 202,
          column: 4
        },
        end: {
          line: 202,
          column: 23
        }
      },
      '59': {
        start: {
          line: 203,
          column: 4
        },
        end: {
          line: 207,
          column: 5
        }
      },
      '60': {
        start: {
          line: 204,
          column: 6
        },
        end: {
          line: 204,
          column: 31
        }
      },
      '61': {
        start: {
          line: 206,
          column: 6
        },
        end: {
          line: 206,
          column: 16
        }
      },
      '62': {
        start: {
          line: 208,
          column: 4
        },
        end: {
          line: 208,
          column: 22
        }
      },
      '63': {
        start: {
          line: 210,
          column: 4
        },
        end: {
          line: 231,
          column: 5
        }
      },
      '64': {
        start: {
          line: 211,
          column: 6
        },
        end: {
          line: 211,
          column: 40
        }
      },
      '65': {
        start: {
          line: 211,
          column: 23
        },
        end: {
          line: 211,
          column: 40
        }
      },
      '66': {
        start: {
          line: 213,
          column: 20
        },
        end: {
          line: 213,
          column: 46
        }
      },
      '67': {
        start: {
          line: 214,
          column: 6
        },
        end: {
          line: 230,
          column: 7
        }
      },
      '68': {
        start: {
          line: 218,
          column: 12
        },
        end: {
          line: 218,
          column: 17
        }
      },
      '69': {
        start: {
          line: 219,
          column: 24
        },
        end: {
          line: 219,
          column: 43
        }
      },
      '70': {
        start: {
          line: 221,
          column: 8
        },
        end: {
          line: 226,
          column: 9
        }
      },
      '71': {
        start: {
          line: 222,
          column: 10
        },
        end: {
          line: 222,
          column: 26
        }
      },
      '72': {
        start: {
          line: 224,
          column: 10
        },
        end: {
          line: 224,
          column: 44
        }
      },
      '73': {
        start: {
          line: 225,
          column: 10
        },
        end: {
          line: 225,
          column: 27
        }
      },
      '74': {
        start: {
          line: 228,
          column: 8
        },
        end: {
          line: 228,
          column: 42
        }
      },
      '75': {
        start: {
          line: 229,
          column: 8
        },
        end: {
          line: 229,
          column: 25
        }
      },
      '76': {
        start: {
          line: 232,
          column: 21
        },
        end: {
          line: 232,
          column: 44
        }
      },
      '77': {
        start: {
          line: 233,
          column: 4
        },
        end: {
          line: 233,
          column: 41
        }
      },
      '78': {
        start: {
          line: 234,
          column: 4
        },
        end: {
          line: 234,
          column: 35
        }
      },
      '79': {
        start: {
          line: 235,
          column: 4
        },
        end: {
          line: 235,
          column: 33
        }
      },
      '80': {
        start: {
          line: 239,
          column: 4
        },
        end: {
          line: 242,
          column: 6
        }
      },
      '81': {
        start: {
          line: 246,
          column: 4
        },
        end: {
          line: 249,
          column: 6
        }
      },
      '82': {
        start: {
          line: 248,
          column: 20
        },
        end: {
          line: 248,
          column: 57
        }
      },
      '83': {
        start: {
          line: 253,
          column: 19
        },
        end: {
          line: 253,
          column: 44
        }
      },
      '84': {
        start: {
          line: 254,
          column: 4
        },
        end: {
          line: 261,
          column: 7
        }
      },
      '85': {
        start: {
          line: 255,
          column: 6
        },
        end: {
          line: 260,
          column: 7
        }
      },
      '86': {
        start: {
          line: 256,
          column: 8
        },
        end: {
          line: 256,
          column: 46
        }
      },
      '87': {
        start: {
          line: 258,
          column: 8
        },
        end: {
          line: 258,
          column: 60
        }
      },
      '88': {
        start: {
          line: 259,
          column: 8
        },
        end: {
          line: 259,
          column: 52
        }
      },
      '89': {
        start: {
          line: 265,
          column: 4
        },
        end: {
          line: 270,
          column: 7
        }
      },
      '90': {
        start: {
          line: 266,
          column: 6
        },
        end: {
          line: 266,
          column: 78
        }
      },
      '91': {
        start: {
          line: 267,
          column: 6
        },
        end: {
          line: 267,
          column: 43
        }
      },
      '92': {
        start: {
          line: 268,
          column: 6
        },
        end: {
          line: 268,
          column: 56
        }
      },
      '93': {
        start: {
          line: 269,
          column: 6
        },
        end: {
          line: 269,
          column: 48
        }
      },
      '94': {
        start: {
          line: 274,
          column: 19
        },
        end: {
          line: 274,
          column: 44
        }
      },
      '95': {
        start: {
          line: 277,
          column: 4
        },
        end: {
          line: 282,
          column: 5
        }
      },
      '96': {
        start: {
          line: 284,
          column: 4
        },
        end: {
          line: 284,
          column: 35
        }
      },
      '97': {
        start: {
          line: 287,
          column: 4
        },
        end: {
          line: 292,
          column: 5
        }
      },
      '98': {
        start: {
          line: 305,
          column: 31
        },
        end: {
          line: 311,
          column: 5
        }
      },
      '99': {
        start: {
          line: 306,
          column: 6
        },
        end: {
          line: 306,
          column: 35
        }
      },
      '100': {
        start: {
          line: 307,
          column: 6
        },
        end: {
          line: 310,
          column: 9
        }
      },
      '101': {
        start: {
          line: 308,
          column: 8
        },
        end: {
          line: 308,
          column: 29
        }
      },
      '102': {
        start: {
          line: 309,
          column: 8
        },
        end: {
          line: 309,
          column: 36
        }
      },
      '103': {
        start: {
          line: 313,
          column: 4
        },
        end: {
          line: 313,
          column: 37
        }
      },
      '104': {
        start: {
          line: 314,
          column: 28
        },
        end: {
          line: 314,
          column: 49
        }
      },
      '105': {
        start: {
          line: 315,
          column: 4
        },
        end: {
          line: 315,
          column: 22
        }
      },
      '106': {
        start: {
          line: 316,
          column: 4
        },
        end: {
          line: 316,
          column: 24
        }
      },
      '107': {
        start: {
          line: 317,
          column: 4
        },
        end: {
          line: 317,
          column: 22
        }
      },
      '108': {
        start: {
          line: 319,
          column: 4
        },
        end: {
          line: 327,
          column: 7
        }
      },
      '109': {
        start: {
          line: 320,
          column: 6
        },
        end: {
          line: 320,
          column: 20
        }
      },
      '110': {
        start: {
          line: 322,
          column: 6
        },
        end: {
          line: 326,
          column: 7
        }
      },
      '111': {
        start: {
          line: 325,
          column: 8
        },
        end: {
          line: 325,
          column: 29
        }
      },
      '112': {
        start: {
          line: 329,
          column: 4
        },
        end: {
          line: 329,
          column: 27
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 26,
            column: 2
          },
          end: {
            line: 26,
            column: 3
          }
        },
        loc: {
          start: {
            line: 26,
            column: 28
          },
          end: {
            line: 54,
            column: 3
          }
        },
        line: 26
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 65,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        loc: {
          start: {
            line: 65,
            column: 15
          },
          end: {
            line: 67,
            column: 3
          }
        },
        line: 65
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 68,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        },
        loc: {
          start: {
            line: 68,
            column: 15
          },
          end: {
            line: 70,
            column: 3
          }
        },
        line: 68
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 87,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        loc: {
          start: {
            line: 87,
            column: 22
          },
          end: {
            line: 89,
            column: 3
          }
        },
        line: 87
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 90,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        },
        loc: {
          start: {
            line: 90,
            column: 25
          },
          end: {
            line: 92,
            column: 3
          }
        },
        line: 90
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 93,
            column: 2
          },
          end: {
            line: 93,
            column: 3
          }
        },
        loc: {
          start: {
            line: 93,
            column: 20
          },
          end: {
            line: 95,
            column: 3
          }
        },
        line: 93
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 101,
            column: 2
          },
          end: {
            line: 101,
            column: 3
          }
        },
        loc: {
          start: {
            line: 101,
            column: 16
          },
          end: {
            line: 103,
            column: 3
          }
        },
        line: 101
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 104,
            column: 2
          },
          end: {
            line: 104,
            column: 3
          }
        },
        loc: {
          start: {
            line: 104,
            column: 17
          },
          end: {
            line: 106,
            column: 3
          }
        },
        line: 104
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 107,
            column: 2
          },
          end: {
            line: 107,
            column: 3
          }
        },
        loc: {
          start: {
            line: 107,
            column: 12
          },
          end: {
            line: 109,
            column: 3
          }
        },
        line: 107
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 127,
            column: 2
          },
          end: {
            line: 127,
            column: 3
          }
        },
        loc: {
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 132,
            column: 3
          }
        },
        line: 127
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 144,
            column: 2
          },
          end: {
            line: 144,
            column: 3
          }
        },
        loc: {
          start: {
            line: 144,
            column: 13
          },
          end: {
            line: 150,
            column: 3
          }
        },
        line: 144
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 152,
            column: 2
          },
          end: {
            line: 152,
            column: 3
          }
        },
        loc: {
          start: {
            line: 152,
            column: 35
          },
          end: {
            line: 167,
            column: 3
          }
        },
        line: 152
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 169,
            column: 2
          },
          end: {
            line: 169,
            column: 3
          }
        },
        loc: {
          start: {
            line: 169,
            column: 21
          },
          end: {
            line: 182,
            column: 3
          }
        },
        line: 169
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 189,
            column: 2
          },
          end: {
            line: 189,
            column: 3
          }
        },
        loc: {
          start: {
            line: 189,
            column: 34
          },
          end: {
            line: 236,
            column: 3
          }
        },
        line: 189
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 238,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        },
        loc: {
          start: {
            line: 238,
            column: 28
          },
          end: {
            line: 243,
            column: 3
          }
        },
        line: 238
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 245,
            column: 2
          },
          end: {
            line: 245,
            column: 3
          }
        },
        loc: {
          start: {
            line: 245,
            column: 15
          },
          end: {
            line: 250,
            column: 3
          }
        },
        line: 245
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 248,
            column: 6
          },
          end: {
            line: 248,
            column: 7
          }
        },
        loc: {
          start: {
            line: 248,
            column: 20
          },
          end: {
            line: 248,
            column: 57
          }
        },
        line: 248
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 252,
            column: 2
          },
          end: {
            line: 252,
            column: 3
          }
        },
        loc: {
          start: {
            line: 252,
            column: 17
          },
          end: {
            line: 262,
            column: 3
          }
        },
        line: 252
      },
      '18': {
        name: '(anonymous_18)',
        decl: {
          start: {
            line: 254,
            column: 36
          },
          end: {
            line: 254,
            column: 37
          }
        },
        loc: {
          start: {
            line: 254,
            column: 57
          },
          end: {
            line: 261,
            column: 5
          }
        },
        line: 254
      },
      '19': {
        name: '(anonymous_19)',
        decl: {
          start: {
            line: 264,
            column: 2
          },
          end: {
            line: 264,
            column: 3
          }
        },
        loc: {
          start: {
            line: 264,
            column: 15
          },
          end: {
            line: 271,
            column: 3
          }
        },
        line: 264
      },
      '20': {
        name: '(anonymous_20)',
        decl: {
          start: {
            line: 265,
            column: 34
          },
          end: {
            line: 265,
            column: 35
          }
        },
        loc: {
          start: {
            line: 265,
            column: 55
          },
          end: {
            line: 270,
            column: 5
          }
        },
        line: 265
      },
      '21': {
        name: '(anonymous_21)',
        decl: {
          start: {
            line: 273,
            column: 2
          },
          end: {
            line: 273,
            column: 3
          }
        },
        loc: {
          start: {
            line: 273,
            column: 11
          },
          end: {
            line: 330,
            column: 3
          }
        },
        line: 273
      },
      '22': {
        name: '(anonymous_22)',
        decl: {
          start: {
            line: 305,
            column: 31
          },
          end: {
            line: 305,
            column: 32
          }
        },
        loc: {
          start: {
            line: 305,
            column: 37
          },
          end: {
            line: 311,
            column: 5
          }
        },
        line: 305
      },
      '23': {
        name: '(anonymous_23)',
        decl: {
          start: {
            line: 307,
            column: 62
          },
          end: {
            line: 307,
            column: 63
          }
        },
        loc: {
          start: {
            line: 307,
            column: 68
          },
          end: {
            line: 310,
            column: 7
          }
        },
        line: 307
      },
      '24': {
        name: '(anonymous_24)',
        decl: {
          start: {
            line: 319,
            column: 32
          },
          end: {
            line: 319,
            column: 33
          }
        },
        loc: {
          start: {
            line: 319,
            column: 38
          },
          end: {
            line: 327,
            column: 5
          }
        },
        line: 319
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 26,
            column: 14
          },
          end: {
            line: 26,
            column: 26
          }
        },
        type: 'default-arg',
        locations: [{
          start: {
            line: 26,
            column: 24
          },
          end: {
            line: 26,
            column: 26
          }
        }],
        line: 26
      },
      '1': {
        loc: {
          start: {
            line: 36,
            column: 15
          },
          end: {
            line: 36,
            column: 44
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 36,
            column: 15
          },
          end: {
            line: 36,
            column: 35
          }
        }, {
          start: {
            line: 36,
            column: 39
          },
          end: {
            line: 36,
            column: 44
          }
        }],
        line: 36
      },
      '2': {
        loc: {
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 50,
            column: 75
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 50,
            column: 75
          }
        }, {
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 50,
            column: 75
          }
        }],
        line: 50
      },
      '3': {
        loc: {
          start: {
            line: 129,
            column: 4
          },
          end: {
            line: 131,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 129,
            column: 4
          },
          end: {
            line: 131,
            column: 5
          }
        }, {
          start: {
            line: 129,
            column: 4
          },
          end: {
            line: 131,
            column: 5
          }
        }],
        line: 129
      },
      '4': {
        loc: {
          start: {
            line: 146,
            column: 4
          },
          end: {
            line: 149,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 146,
            column: 4
          },
          end: {
            line: 149,
            column: 5
          }
        }, {
          start: {
            line: 146,
            column: 4
          },
          end: {
            line: 149,
            column: 5
          }
        }],
        line: 146
      },
      '5': {
        loc: {
          start: {
            line: 155,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 155,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        }, {
          start: {
            line: 155,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        }],
        line: 155
      },
      '6': {
        loc: {
          start: {
            line: 155,
            column: 8
          },
          end: {
            line: 155,
            column: 45
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 155,
            column: 8
          },
          end: {
            line: 155,
            column: 29
          }
        }, {
          start: {
            line: 155,
            column: 33
          },
          end: {
            line: 155,
            column: 45
          }
        }],
        line: 155
      },
      '7': {
        loc: {
          start: {
            line: 156,
            column: 6
          },
          end: {
            line: 158,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 156,
            column: 6
          },
          end: {
            line: 158,
            column: 7
          }
        }, {
          start: {
            line: 156,
            column: 6
          },
          end: {
            line: 158,
            column: 7
          }
        }],
        line: 156
      },
      '8': {
        loc: {
          start: {
            line: 156,
            column: 10
          },
          end: {
            line: 156,
            column: 50
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 156,
            column: 10
          },
          end: {
            line: 156,
            column: 31
          }
        }, {
          start: {
            line: 156,
            column: 35
          },
          end: {
            line: 156,
            column: 50
          }
        }],
        line: 156
      },
      '9': {
        loc: {
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 165,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 165,
            column: 5
          }
        }, {
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 165,
            column: 5
          }
        }],
        line: 162
      },
      '10': {
        loc: {
          start: {
            line: 162,
            column: 8
          },
          end: {
            line: 162,
            column: 31
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 162,
            column: 8
          },
          end: {
            line: 162,
            column: 15
          }
        }, {
          start: {
            line: 162,
            column: 19
          },
          end: {
            line: 162,
            column: 31
          }
        }],
        line: 162
      },
      '11': {
        loc: {
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 181,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 181,
            column: 5
          }
        }, {
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 181,
            column: 5
          }
        }],
        line: 170
      },
      '12': {
        loc: {
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 170,
            column: 92
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 170,
            column: 30
          }
        }, {
          start: {
            line: 170,
            column: 34
          },
          end: {
            line: 170,
            column: 92
          }
        }],
        line: 170
      },
      '13': {
        loc: {
          start: {
            line: 173,
            column: 6
          },
          end: {
            line: 177,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 173,
            column: 6
          },
          end: {
            line: 177,
            column: 7
          }
        }],
        line: 173
      },
      '14': {
        loc: {
          start: {
            line: 190,
            column: 4
          },
          end: {
            line: 190,
            column: 27
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 190,
            column: 4
          },
          end: {
            line: 190,
            column: 27
          }
        }, {
          start: {
            line: 190,
            column: 4
          },
          end: {
            line: 190,
            column: 27
          }
        }],
        line: 190
      },
      '15': {
        loc: {
          start: {
            line: 194,
            column: 24
          },
          end: {
            line: 194,
            column: 71
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 194,
            column: 49
          },
          end: {
            line: 194,
            column: 52
          }
        }, {
          start: {
            line: 194,
            column: 55
          },
          end: {
            line: 194,
            column: 71
          }
        }],
        line: 194
      },
      '16': {
        loc: {
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        }, {
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        }],
        line: 197
      },
      '17': {
        loc: {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 231,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 231,
            column: 5
          }
        }, {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 231,
            column: 5
          }
        }],
        line: 210
      },
      '18': {
        loc: {
          start: {
            line: 211,
            column: 6
          },
          end: {
            line: 211,
            column: 40
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 211,
            column: 6
          },
          end: {
            line: 211,
            column: 40
          }
        }, {
          start: {
            line: 211,
            column: 6
          },
          end: {
            line: 211,
            column: 40
          }
        }],
        line: 211
      },
      '19': {
        loc: {
          start: {
            line: 214,
            column: 6
          },
          end: {
            line: 230,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 214,
            column: 6
          },
          end: {
            line: 230,
            column: 7
          }
        }, {
          start: {
            line: 214,
            column: 6
          },
          end: {
            line: 230,
            column: 7
          }
        }],
        line: 214
      },
      '20': {
        loc: {
          start: {
            line: 221,
            column: 8
          },
          end: {
            line: 226,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 221,
            column: 8
          },
          end: {
            line: 226,
            column: 9
          }
        }, {
          start: {
            line: 221,
            column: 8
          },
          end: {
            line: 226,
            column: 9
          }
        }],
        line: 221
      },
      '21': {
        loc: {
          start: {
            line: 235,
            column: 4
          },
          end: {
            line: 235,
            column: 32
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 235,
            column: 4
          },
          end: {
            line: 235,
            column: 12
          }
        }, {
          start: {
            line: 235,
            column: 16
          },
          end: {
            line: 235,
            column: 32
          }
        }],
        line: 235
      },
      '22': {
        loc: {
          start: {
            line: 255,
            column: 6
          },
          end: {
            line: 260,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 255,
            column: 6
          },
          end: {
            line: 260,
            column: 7
          }
        }, {
          start: {
            line: 255,
            column: 6
          },
          end: {
            line: 260,
            column: 7
          }
        }],
        line: 255
      },
      '23': {
        loc: {
          start: {
            line: 266,
            column: 26
          },
          end: {
            line: 266,
            column: 76
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 266,
            column: 52
          },
          end: {
            line: 266,
            column: 56
          }
        }, {
          start: {
            line: 266,
            column: 59
          },
          end: {
            line: 266,
            column: 76
          }
        }],
        line: 266
      },
      '24': {
        loc: {
          start: {
            line: 277,
            column: 4
          },
          end: {
            line: 282,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 277,
            column: 4
          },
          end: {
            line: 282,
            column: 5
          }
        }],
        line: 277
      },
      '25': {
        loc: {
          start: {
            line: 287,
            column: 4
          },
          end: {
            line: 292,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 287,
            column: 4
          },
          end: {
            line: 292,
            column: 5
          }
        }],
        line: 287
      },
      '26': {
        loc: {
          start: {
            line: 322,
            column: 6
          },
          end: {
            line: 326,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 322,
            column: 6
          },
          end: {
            line: 326,
            column: 7
          }
        }],
        line: 322
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0,
      '72': 0,
      '73': 0,
      '74': 0,
      '75': 0,
      '76': 0,
      '77': 0,
      '78': 0,
      '79': 0,
      '80': 0,
      '81': 0,
      '82': 0,
      '83': 0,
      '84': 0,
      '85': 0,
      '86': 0,
      '87': 0,
      '88': 0,
      '89': 0,
      '90': 0,
      '91': 0,
      '92': 0,
      '93': 0,
      '94': 0,
      '95': 0,
      '96': 0,
      '97': 0,
      '98': 0,
      '99': 0,
      '100': 0,
      '101': 0,
      '102': 0,
      '103': 0,
      '104': 0,
      '105': 0,
      '106': 0,
      '107': 0,
      '108': 0,
      '109': 0,
      '110': 0,
      '111': 0,
      '112': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    b: {
      '0': [0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0],
      '12': [0, 0],
      '13': [0],
      '14': [0, 0],
      '15': [0, 0],
      '16': [0, 0],
      '17': [0, 0],
      '18': [0, 0],
      '19': [0, 0],
      '20': [0, 0],
      '21': [0, 0],
      '22': [0, 0],
      '23': [0, 0],
      '24': [0],
      '25': [0],
      '26': [0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}(); /**
      * Created by evio on 2017/8/29.
      */


var _middleware = require('../miox_modules/middleware');

var _middleware2 = _interopRequireDefault(_middleware);

var _dictionary = require('../miox_modules/dictionary');

var _dictionary2 = _interopRequireDefault(_dictionary);

var _request = require('../miox_modules/request');

var _request2 = _interopRequireDefault(_request);

var _response = require('../miox_modules/response');

var _response2 = _interopRequireDefault(_response);

var _history6 = require('./history');

var _history7 = _interopRequireDefault(_history6);

var _plugin = require('./plugin');

var _plugin2 = _interopRequireDefault(_plugin);

var _webtree = require('./webtree');

var _webtree2 = _interopRequireDefault(_webtree);

var _util = require('./util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var toString = (cov_65jdi4oxd.s[0]++, Object.prototype.toString);

var Miox = function (_MiddleWare) {
  (0, _inherits3.default)(Miox, _MiddleWare);

  /**
   * 参数详解：
   * @param options [Object object]
   *  - @max [Object number: 1] 在页面上存在最大个数的webview
   *  - @popState [Object boolean: false] 是否强制使用popState模式
   *  - @session [Object boolean: false] 是否使用sessionStorage来记录层级用于方向判断
   *  - @strict [Object boolean: true] 是否严格模式，用来区分query变化是否重新渲染页面
   */
  function Miox() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (cov_65jdi4oxd.b[0][0]++, {});
    (0, _classCallCheck3.default)(this, Miox);
    cov_65jdi4oxd.f[0]++;
    cov_65jdi4oxd.s[1]++;

    var _this = (0, _possibleConstructorReturn3.default)(this, (Miox.__proto__ || Object.getPrototypeOf(Miox)).call(this));

    cov_65jdi4oxd.s[2]++;


    _this.options = (0, _util.extend)(options, {
      max: 1,
      popState: false,
      session: false,
      strict: true
    });

    cov_65jdi4oxd.s[3]++;
    _this.env = (cov_65jdi4oxd.b[1][0]++, process.env.MIOX_ENV) || (cov_65jdi4oxd.b[1][1]++, 'web');
    cov_65jdi4oxd.s[4]++;
    _this.vars = new _dictionary2.default();
    cov_65jdi4oxd.s[5]++;
    _this.cache = new _dictionary2.default();
    cov_65jdi4oxd.s[6]++;
    _this.plugin = new _plugin2.default(_this);
    cov_65jdi4oxd.s[7]++;
    _this.installed = false;
    cov_65jdi4oxd.s[8]++;
    _this.err = null;
    cov_65jdi4oxd.s[9]++;
    _this.doing = false;
    cov_65jdi4oxd.s[10]++;
    _this.clientMounted = false;

    cov_65jdi4oxd.s[11]++;
    _this.set('request', {});
    cov_65jdi4oxd.s[12]++;
    _this.set('response', {});
    cov_65jdi4oxd.s[13]++;
    _this.set('exists-webview', null);
    cov_65jdi4oxd.s[14]++;
    _this.set('active-webview', null);

    cov_65jdi4oxd.s[15]++;
    if (_this.env !== 'server') {
        cov_65jdi4oxd.b[2][0]++;
        cov_65jdi4oxd.s[16]++;
        _this.set('container', global.document.body);
      } else {
      cov_65jdi4oxd.b[2][1]++;
    }cov_65jdi4oxd.s[17]++;
    _this.vars.on('engine', _this.plugin.Engine.bind(_this.plugin));
    cov_65jdi4oxd.s[18]++;
    _this.vars.on('animate', _this.plugin.Animate.bind(_this.plugin));
    return _this;
  }

  /* istanbul ignore next */


  (0, _createClass3.default)(Miox, [{
    key: 'install',
    value: function install() {
      var _this2 = this;

      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      args.forEach(function (arg) {
        if (typeof arg === 'function') {
          arg(_this2);
        }
      });
    }
  }, {
    key: 'set',
    value: function set() {
      var _vars;

      cov_65jdi4oxd.f[1]++;
      cov_65jdi4oxd.s[19]++;

      return (_vars = this.vars).set.apply(_vars, arguments);
    }
  }, {
    key: 'get',
    value: function get() {
      var _vars2;

      cov_65jdi4oxd.f[2]++;
      cov_65jdi4oxd.s[20]++;

      return (_vars2 = this.vars).get.apply(_vars2, arguments);
    }
    /* istanbul ignore next */

  }, {
    key: 'del',
    value: function del() {
      var _vars3;

      return (_vars3 = this.vars).del.apply(_vars3, arguments);
    }
    /* istanbul ignore next */

  }, {
    key: 'exists',
    value: function exists() {
      var _vars4;

      return (_vars4 = this.vars).exists.apply(_vars4, arguments);
    }
    /* istanbul ignore next */

  }, {
    key: 'filter',
    value: function filter() {
      var _vars5;

      return (_vars5 = this.vars).filter.apply(_vars5, arguments);
    }
    /* istanbul ignore next */

  }, {
    key: 'link',
    value: function link() {
      var _history;

      return (_history = this.history).link.apply(_history, arguments);
    }
  }, {
    key: 'push',
    value: function () {
      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
        var _history2;

        var _args = arguments;
        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                cov_65jdi4oxd.f[3]++;
                cov_65jdi4oxd.s[21]++;
                _context.next = 4;
                return (_history2 = this.history).push.apply(_history2, _args);

              case 4:
                return _context.abrupt('return', _context.sent);

              case 5:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function push() {
        return _ref.apply(this, arguments);
      }

      return push;
    }()
  }, {
    key: 'replace',
    value: function () {
      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
        var _history3;

        var _args2 = arguments;
        return _regenerator2.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                cov_65jdi4oxd.f[4]++;
                cov_65jdi4oxd.s[22]++;
                _context2.next = 4;
                return (_history3 = this.history).replace.apply(_history3, _args2);

              case 4:
                return _context2.abrupt('return', _context2.sent);

              case 5:
              case 'end':
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function replace() {
        return _ref2.apply(this, arguments);
      }

      return replace;
    }()
  }, {
    key: 'go',
    value: function () {
      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
        var _history4;

        var _args3 = arguments;
        return _regenerator2.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                cov_65jdi4oxd.f[5]++;
                cov_65jdi4oxd.s[23]++;
                _context3.next = 4;
                return (_history4 = this.history).go.apply(_history4, _args3);

              case 4:
                return _context3.abrupt('return', _context3.sent);

              case 5:
              case 'end':
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function go() {
        return _ref3.apply(this, arguments);
      }

      return go;
    }()
    /* istanbul ignore next */

  }, {
    key: 'redirect',
    value: function () {
      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4() {
        var _history5;

        var _args4 = arguments;
        return _regenerator2.default.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                _context4.next = 2;
                return (_history5 = this.history).redirect.apply(_history5, _args4);

              case 2:
                return _context4.abrupt('return', _context4.sent);

              case 3:
              case 'end':
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function redirect() {
        return _ref4.apply(this, arguments);
      }

      return redirect;
    }()
  }, {
    key: 'exchange',
    value: function exchange() {
      cov_65jdi4oxd.f[10]++;

      var webView = (cov_65jdi4oxd.s[30]++, this.get('active-webview'));
      cov_65jdi4oxd.s[31]++;
      if (webView) {
        cov_65jdi4oxd.b[4][0]++;
        cov_65jdi4oxd.s[32]++;

        this.set('exists-webview', webView);
        cov_65jdi4oxd.s[33]++;
        this.set('active-webview', null);
      } else {
        cov_65jdi4oxd.b[4][1]++;
      }
    }
  }, {
    key: 'notify',
    value: function () {
      var _ref5 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5(index, redirecting) {
        var webview;
        return _regenerator2.default.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                cov_65jdi4oxd.f[11]++;
                webview = (cov_65jdi4oxd.s[34]++, this.webView);
                cov_65jdi4oxd.s[35]++;

                if (!((cov_65jdi4oxd.b[6][0]++, this.env !== 'server') && (cov_65jdi4oxd.b[6][1]++, !redirecting))) {
                  _context5.next = 19;
                  break;
                }

                cov_65jdi4oxd.b[5][0]++;
                cov_65jdi4oxd.s[36]++;

                if (!((cov_65jdi4oxd.b[8][0]++, this.env === 'client') && (cov_65jdi4oxd.b[8][1]++, !this.installed))) {
                  _context5.next = 13;
                  break;
                }

                cov_65jdi4oxd.b[7][0]++;
                cov_65jdi4oxd.s[37]++;
                _context5.next = 11;
                return this.emit('client:render:mount', webview);

              case 11:
                _context5.next = 14;
                break;

              case 13:
                cov_65jdi4oxd.b[7][1]++;

              case 14:
                cov_65jdi4oxd.s[38]++;
                _context5.next = 17;
                return this.history.notify(index, webview);

              case 17:
                _context5.next = 20;
                break;

              case 19:
                cov_65jdi4oxd.b[5][1]++;

              case 20:
                cov_65jdi4oxd.s[39]++;


                if ((cov_65jdi4oxd.b[10][0]++, webview) && (cov_65jdi4oxd.b[10][1]++, !redirecting)) {
                  cov_65jdi4oxd.b[9][0]++;
                  cov_65jdi4oxd.s[40]++;

                  this.installed = true;
                  cov_65jdi4oxd.s[41]++;
                  this.exchange();
                } else {
                  cov_65jdi4oxd.b[9][1]++;
                }
                cov_65jdi4oxd.s[42]++;
                this.doing = false;

              case 24:
              case 'end':
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function notify(_x2, _x3) {
        return _ref5.apply(this, arguments);
      }

      return notify;
    }()
  }, {
    key: 'error',
    value: function () {
      var _ref6 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7(value) {
        var _this3 = this;

        return _regenerator2.default.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                cov_65jdi4oxd.f[12]++;
                cov_65jdi4oxd.s[43]++;

                if (!((cov_65jdi4oxd.b[12][0]++, value instanceof Error) || (cov_65jdi4oxd.b[12][1]++, Object.prototype.toString.call(value) === '[object Error]'))) {
                  _context7.next = 17;
                  break;
                }

                cov_65jdi4oxd.b[11][0]++;
                cov_65jdi4oxd.s[44]++;

                this.err = value;
                /* istanbul ignore if */
                cov_65jdi4oxd.s[45]++;

                if (!(this.err.code === 302)) {
                  _context7.next = 11;
                  break;
                }

                return _context7.abrupt('return', (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6() {
                  return _regenerator2.default.wrap(function _callee6$(_context6) {
                    while (1) {
                      switch (_context6.prev = _context6.next) {
                        case 0:
                          _context6.next = 2;
                          return _this3.go(_this3.err.url);

                        case 2:
                          return _context6.abrupt('return', _context6.sent);

                        case 3:
                        case 'end':
                          return _context6.stop();
                      }
                    }
                  }, _callee6, _this3);
                })));

              case 11:
                cov_65jdi4oxd.b[13][0]++;
                cov_65jdi4oxd.s[46]++;
                _context7.next = 15;
                return this.emit(String(value.code), value);

              case 15:
                _context7.next = 23;
                break;

              case 17:
                cov_65jdi4oxd.b[11][1]++;
                cov_65jdi4oxd.s[47]++;

                this.err = null;
                cov_65jdi4oxd.s[48]++;
                _context7.next = 23;
                return this.emit('200', this.webView);

              case 23:
              case 'end':
                return _context7.stop();
            }
          }
        }, _callee7, this);
      }));

      function error(_x4) {
        return _ref6.apply(this, arguments);
      }

      return error;
    }()

    /**
     * 运行系统中间件方法
     * 用来匹配到对应的webview
     * @returns {Promise.<*>}
     */

  }, {
    key: 'createServerProgress',
    value: function () {
      var _ref8 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8(uri) {
        var error, index, value, _ref9, basic, mark, webview, callback;

        return _regenerator2.default.wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                cov_65jdi4oxd.f[13]++;
                cov_65jdi4oxd.s[49]++;

                if (!this.doing) {
                  _context8.next = 8;
                  break;
                }

                cov_65jdi4oxd.b[14][0]++;
                cov_65jdi4oxd.s[50]++;
                return _context8.abrupt('return');

              case 8:
                cov_65jdi4oxd.b[14][1]++;

              case 9:
                cov_65jdi4oxd.s[51]++;

                this.doing = true;

                error = void 0, index = void 0;
                cov_65jdi4oxd.s[52]++;

                this.set('request', uri instanceof _request2.default ? (cov_65jdi4oxd.b[15][0]++, uri) : (cov_65jdi4oxd.b[15][1]++, new _request2.default(uri)));
                cov_65jdi4oxd.s[53]++;
                this.set('response', new _response2.default());
                cov_65jdi4oxd.s[54]++;
                this.request.app = this.response.app = this;
                cov_65jdi4oxd.s[55]++;
                if (this.history) {
                  cov_65jdi4oxd.b[16][0]++;
                  cov_65jdi4oxd.s[56]++;

                  index = this.history.processDirection(this.request);
                } else {
                  cov_65jdi4oxd.b[16][1]++;
                }

                cov_65jdi4oxd.s[57]++;
                _context8.next = 23;
                return this.emit('process:start');

              case 23:
                cov_65jdi4oxd.s[58]++;

                this.index = index;
                cov_65jdi4oxd.s[59]++;
                _context8.prev = 26;
                cov_65jdi4oxd.s[60]++;
                _context8.next = 30;
                return this.execute(this);

              case 30:
                _context8.next = 36;
                break;

              case 32:
                _context8.prev = 32;
                _context8.t0 = _context8['catch'](26);
                cov_65jdi4oxd.s[61]++;

                error = _context8.t0;

              case 36:
                cov_65jdi4oxd.s[62]++;

                delete this.index;

                cov_65jdi4oxd.s[63]++;
                if (error) {
                  cov_65jdi4oxd.b[17][0]++;
                  cov_65jdi4oxd.s[64]++;

                  if (!error.code) {
                      cov_65jdi4oxd.b[18][0]++;
                      cov_65jdi4oxd.s[65]++;
                      error.code = 500;
                    } else {
                    cov_65jdi4oxd.b[18][1]++;
                  }
                } else {
                  cov_65jdi4oxd.b[17][1]++;
                  value = (cov_65jdi4oxd.s[66]++, this.get('active-webview'));
                  cov_65jdi4oxd.s[67]++;

                  if (value) {
                    cov_65jdi4oxd.b[19][0]++;
                    _ref9 = (cov_65jdi4oxd.s[68]++, value), basic = _ref9.basic, mark = _ref9.mark;
                    webview = (cov_65jdi4oxd.s[69]++, basic.dic.get(mark));
                    cov_65jdi4oxd.s[70]++;


                    if (webview) {
                      cov_65jdi4oxd.b[20][0]++;
                      cov_65jdi4oxd.s[71]++;

                      this.exchange();
                    } else {
                      cov_65jdi4oxd.b[20][1]++;
                      cov_65jdi4oxd.s[72]++;

                      error = new Error('webview lost');
                      cov_65jdi4oxd.s[73]++;
                      error.code = 404;
                    }
                  } else {
                    cov_65jdi4oxd.b[19][1]++;
                    cov_65jdi4oxd.s[74]++;

                    error = new Error('webview lost');
                    cov_65jdi4oxd.s[75]++;
                    error.code = 404;
                  }
                }
                cov_65jdi4oxd.s[76]++;
                _context8.next = 43;
                return this.error(error);

              case 43:
                callback = _context8.sent;
                cov_65jdi4oxd.s[77]++;
                _context8.next = 47;
                return this.notify(index, !!callback);

              case 47:
                cov_65jdi4oxd.s[78]++;
                _context8.next = 50;
                return this.emit('process:end');

              case 50:
                cov_65jdi4oxd.s[79]++;
                _context8.t1 = (cov_65jdi4oxd.b[21][0]++, callback);

                if (!_context8.t1) {
                  _context8.next = 56;
                  break;
                }

                cov_65jdi4oxd.b[21][1]++;
                _context8.next = 56;
                return callback();

              case 56:
              case 'end':
                return _context8.stop();
            }
          }
        }, _callee8, this, [[26, 32]]);
      }));

      function createServerProgress(_x5) {
        return _ref8.apply(this, arguments);
      }

      return createServerProgress;
    }()
  }, {
    key: 'render',
    value: function () {
      var _ref10 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee9(views, data) {
        return _regenerator2.default.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                cov_65jdi4oxd.f[14]++;
                cov_65jdi4oxd.s[80]++;
                _context9.next = 4;
                return this.response.render(this.plugin.get('engine'), views, data);

              case 4:
                return _context9.abrupt('return', _context9.sent);

              case 5:
              case 'end':
                return _context9.stop();
            }
          }
        }, _callee9, this);
      }));

      function render(_x6, _x7) {
        return _ref10.apply(this, arguments);
      }

      return render;
    }()
  }, {
    key: 'pathChange',
    value: function pathChange() {
      var _this4 = this;

      cov_65jdi4oxd.f[15]++;
      cov_65jdi4oxd.s[81]++;

      this.history.on('pathchange', function () {
        var _ref11 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee10(next) {
          return _regenerator2.default.wrap(function _callee10$(_context10) {
            while (1) {
              switch (_context10.prev = _context10.next) {
                case 0:
                  cov_65jdi4oxd.f[16]++;
                  cov_65jdi4oxd.s[82]++;
                  _context10.next = 4;
                  return _this4.createServerProgress(next);

                case 4:
                  return _context10.abrupt('return', _context10.sent);

                case 5:
                case 'end':
                  return _context10.stop();
              }
            }
          }, _callee10, _this4);
        }));

        return function (_x8) {
          return _ref11.apply(this, arguments);
        };
      }());
    }
  }, {
    key: 'searchChange',
    value: function searchChange() {
      var _this5 = this;

      cov_65jdi4oxd.f[17]++;

      var engine = (cov_65jdi4oxd.s[83]++, this.plugin.get('engine'));
      cov_65jdi4oxd.s[84]++;
      this.history.on('searchchange', function () {
        var _ref12 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee11(next, prev) {
          return _regenerator2.default.wrap(function _callee11$(_context11) {
            while (1) {
              switch (_context11.prev = _context11.next) {
                case 0:
                  cov_65jdi4oxd.f[18]++;
                  cov_65jdi4oxd.s[85]++;

                  if (!_this5.options.strict) {
                    _context11.next = 9;
                    break;
                  }

                  cov_65jdi4oxd.b[22][0]++;
                  cov_65jdi4oxd.s[86]++;
                  _context11.next = 7;
                  return _this5.createServerProgress(next);

                case 7:
                  _context11.next = 16;
                  break;

                case 9:
                  cov_65jdi4oxd.b[22][1]++;
                  cov_65jdi4oxd.s[87]++;
                  _context11.next = 13;
                  return engine.searchchange(_this5.webView, prev, next);

                case 13:
                  cov_65jdi4oxd.s[88]++;
                  _context11.next = 16;
                  return _this5.emit('searchchange', prev, next);

                case 16:
                case 'end':
                  return _context11.stop();
              }
            }
          }, _callee11, _this5);
        }));

        return function (_x9, _x10) {
          return _ref12.apply(this, arguments);
        };
      }());
    }
  }, {
    key: 'hashChange',
    value: function hashChange() {
      var _this6 = this;

      cov_65jdi4oxd.f[19]++;
      cov_65jdi4oxd.s[89]++;

      this.history.on('hashchange', function () {
        var _ref13 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee12(next, prev) {
          return _regenerator2.default.wrap(function _callee12$(_context12) {
            while (1) {
              switch (_context12.prev = _context12.next) {
                case 0:
                  cov_65jdi4oxd.f[20]++;
                  cov_65jdi4oxd.s[90]++;

                  _this6.set('request', next instanceof _request2.default ? (cov_65jdi4oxd.b[23][0]++, next) : (cov_65jdi4oxd.b[23][1]++, new _request2.default(next)));
                  cov_65jdi4oxd.s[91]++;
                  _this6.set('response', new _response2.default());
                  cov_65jdi4oxd.s[92]++;
                  _context12.next = 8;
                  return engine.hashchange(_this6.webView, prev, next);

                case 8:
                  cov_65jdi4oxd.s[93]++;
                  _context12.next = 11;
                  return _this6.emit('hashchange', prev, next);

                case 11:
                case 'end':
                  return _context12.stop();
              }
            }
          }, _callee12, _this6);
        }));

        return function (_x11, _x12) {
          return _ref13.apply(this, arguments);
        };
      }());
    }
  }, {
    key: 'listen',
    value: function listen() {
      var _this7 = this;

      cov_65jdi4oxd.f[21]++;

      var engine = (cov_65jdi4oxd.s[94]++, this.plugin.get('engine'));

      /* istanbul ignore if */
      cov_65jdi4oxd.s[95]++;
      if (!engine) {
        throw new Error('You have not set webview rendering engine, ' + 'you must set it first.');
      } else {
        cov_65jdi4oxd.b[24][0]++;
      }

      cov_65jdi4oxd.s[96]++;
      this.__defineProcessHandle__();

      /* istanbul ignore if */
      cov_65jdi4oxd.s[97]++;
      if (this.env === 'server') {
        if (typeof engine.ssr !== 'function') {
          throw new Error('SSR must be a function to render');
        }
        return engine.ssr();
      } else {
        cov_65jdi4oxd.b[25][0]++;
      }

      /* istanbul ignore next */
      var clientResolveCallback = function clientResolveCallback() {
        _this7.emit('client:render:polyfill');
        _this7.history.action = 'push';
        _this7.createServerProgress(_this7.history.location()).then(function () {
          _this7.history.clear();
          _this7.clientMounted = true;
          return _this7.emit('app:end');
        });
      };

      cov_65jdi4oxd.s[98]++;
      var webResolveCallback = function webResolveCallback() {
        cov_65jdi4oxd.f[22]++;
        cov_65jdi4oxd.s[99]++;

        _this7.history.action = 'push';
        cov_65jdi4oxd.s[100]++;
        _this7.createServerProgress(_this7.history.location()).then(function () {
          cov_65jdi4oxd.f[23]++;
          cov_65jdi4oxd.s[101]++;

          _this7.history.clear();
          cov_65jdi4oxd.s[102]++;
          return _this7.emit('app:end');
        });
      };

      cov_65jdi4oxd.s[103]++;
      this.history = new _history7.default(this);
      var historyListener = (cov_65jdi4oxd.s[104]++, this.history.listen());
      cov_65jdi4oxd.s[105]++;
      this.pathChange();
      cov_65jdi4oxd.s[106]++;
      this.searchChange();
      cov_65jdi4oxd.s[107]++;
      this.hashChange();

      cov_65jdi4oxd.s[108]++;
      this.emit('app:start').then(function () {
        cov_65jdi4oxd.f[24]++;
        cov_65jdi4oxd.s[109]++;

        (0, _webtree2.default)(_this7);
        /* istanbul ignore if */
        cov_65jdi4oxd.s[110]++;
        if (_this7.env === 'client') {
          clientResolveCallback();
        } else {
          cov_65jdi4oxd.b[26][0]++;
          cov_65jdi4oxd.s[111]++;

          webResolveCallback();
        }
      });

      cov_65jdi4oxd.s[112]++;
      return historyListener;
    }

    /* istanbul ignore next */

  }, {
    key: 'fetch',
    value: function () {
      var _ref14 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee13() {
        var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var client, server;
        return _regenerator2.default.wrap(function _callee13$(_context13) {
          while (1) {
            switch (_context13.prev = _context13.next) {
              case 0:
                client = void 0, server = void 0;


                if (typeof callback === 'function') {
                  client = server = callback;
                } else {
                  client = callback.client;
                  server = callback.server;
                }

                if (!(!this.clientMounted && this.env === 'client' || this.env === 'server' && this.clientMounted)) {
                  _context13.next = 4;
                  break;
                }

                return _context13.abrupt('return');

              case 4:
                if (!(!client || !server)) {
                  _context13.next = 6;
                  break;
                }

                throw new Error('client and server must be both function');

              case 6:
                if (!(this.env === 'client' && this.clientMounted)) {
                  _context13.next = 10;
                  break;
                }

                _context13.next = 9;
                return client(this.reference);

              case 9:
                return _context13.abrupt('return', _context13.sent);

              case 10:
                if (!(this.env === 'server' && !this.clientMounted)) {
                  _context13.next = 14;
                  break;
                }

                _context13.next = 13;
                return server(this.reference);

              case 13:
                return _context13.abrupt('return', _context13.sent);

              case 14:
                _context13.next = 16;
                return client(this.reference);

              case 16:
                return _context13.abrupt('return', _context13.sent);

              case 17:
              case 'end':
                return _context13.stop();
            }
          }
        }, _callee13, this);
      }));

      function fetch() {
        return _ref14.apply(this, arguments);
      }

      return fetch;
    }()
  }, {
    key: 'request',
    get: function get() {
      cov_65jdi4oxd.f[6]++;
      cov_65jdi4oxd.s[24]++;

      return this.get('request');
    }
  }, {
    key: 'response',
    get: function get() {
      cov_65jdi4oxd.f[7]++;
      cov_65jdi4oxd.s[25]++;

      return this.get('response');
    }
  }, {
    key: 'req',
    get: function get() {
      cov_65jdi4oxd.f[8]++;
      cov_65jdi4oxd.s[26]++;

      return this.request;
    }
    /* istanbul ignore next */

  }, {
    key: 'res',
    get: function get() {
      return this.response;
    }
    /* istanbul ignore next */

  }, {
    key: 'query',
    get: function get() {
      return this.req.query || {};
    }
    /* istanbul ignore next */

  }, {
    key: 'pathname',
    get: function get() {
      return this.req.pathname || '/';
    }
    /* istanbul ignore next */

  }, {
    key: 'url',
    get: function get() {
      return this.req.href || '/';
    }
  }, {
    key: 'webView',
    get: function get() {
      cov_65jdi4oxd.f[9]++;

      var existsWebView = (cov_65jdi4oxd.s[27]++, this.get('exists-webview'));
      cov_65jdi4oxd.s[28]++;
      if (existsWebView) {
        cov_65jdi4oxd.b[3][0]++;
        cov_65jdi4oxd.s[29]++;

        return existsWebView.basic.dic.get(existsWebView.mark);
      } else {
        cov_65jdi4oxd.b[3][1]++;
      }
    }

    /* istanbul ignore next */

  }, {
    key: 'reference',
    get: function get() {
      return {
        fetch: this.fetch.bind(this),
        application: this.$application,
        service: this.$context,
        ctx: this
      };
    }
  }]);
  return Miox;
}(_middleware2.default);

exports.default = Miox;
module.exports = exports['default'];