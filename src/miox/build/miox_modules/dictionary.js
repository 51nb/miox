'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var cov_5jwsx5i7t = function () {
    var path = '/Users/shenyunjie/CodeBox/miox/src/miox/src/miox_modules/dictionary.js',
        hash = '424bf2bacbb4ebcfcfe9b46de1a4ce2eb779114b',
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/Users/shenyunjie/CodeBox/miox/src/miox/src/miox_modules/dictionary.js',
        statementMap: {
            '0': {
                start: {
                    line: 7,
                    column: 8
                },
                end: {
                    line: 7,
                    column: 16
                }
            },
            '1': {
                start: {
                    line: 8,
                    column: 8
                },
                end: {
                    line: 8,
                    column: 28
                }
            },
            '2': {
                start: {
                    line: 9,
                    column: 8
                },
                end: {
                    line: 9,
                    column: 23
                }
            },
            '3': {
                start: {
                    line: 30,
                    column: 8
                },
                end: {
                    line: 30,
                    column: 48
                }
            },
            '4': {
                start: {
                    line: 30,
                    column: 41
                },
                end: {
                    line: 30,
                    column: 48
                }
            },
            '5': {
                start: {
                    line: 31,
                    column: 8
                },
                end: {
                    line: 31,
                    column: 28
                }
            },
            '6': {
                start: {
                    line: 32,
                    column: 8
                },
                end: {
                    line: 42,
                    column: 11
                }
            },
            '7': {
                start: {
                    line: 34,
                    column: 20
                },
                end: {
                    line: 34,
                    column: 41
                }
            },
            '8': {
                start: {
                    line: 36,
                    column: 28
                },
                end: {
                    line: 36,
                    column: 47
                }
            },
            '9': {
                start: {
                    line: 37,
                    column: 16
                },
                end: {
                    line: 37,
                    column: 44
                }
            },
            '10': {
                start: {
                    line: 38,
                    column: 16
                },
                end: {
                    line: 40,
                    column: 17
                }
            },
            '11': {
                start: {
                    line: 39,
                    column: 20
                },
                end: {
                    line: 39,
                    column: 47
                }
            },
            '12': {
                start: {
                    line: 51,
                    column: 8
                },
                end: {
                    line: 51,
                    column: 38
                }
            },
            '13': {
                start: {
                    line: 59,
                    column: 8
                },
                end: {
                    line: 61,
                    column: 9
                }
            },
            '14': {
                start: {
                    line: 60,
                    column: 12
                },
                end: {
                    line: 60,
                    column: 37
                }
            },
            '15': {
                start: {
                    line: 70,
                    column: 23
                },
                end: {
                    line: 70,
                    column: 25
                }
            },
            '16': {
                start: {
                    line: 71,
                    column: 8
                },
                end: {
                    line: 76,
                    column: 9
                }
            },
            '17': {
                start: {
                    line: 72,
                    column: 26
                },
                end: {
                    line: 72,
                    column: 50
                }
            },
            '18': {
                start: {
                    line: 73,
                    column: 12
                },
                end: {
                    line: 75,
                    column: 13
                }
            },
            '19': {
                start: {
                    line: 74,
                    column: 16
                },
                end: {
                    line: 74,
                    column: 46
                }
            },
            '20': {
                start: {
                    line: 77,
                    column: 8
                },
                end: {
                    line: 77,
                    column: 22
                }
            },
            '21': {
                start: {
                    line: 87,
                    column: 8
                },
                end: {
                    line: 87,
                    column: 54
                }
            },
            '22': {
                start: {
                    line: 87,
                    column: 47
                },
                end: {
                    line: 87,
                    column: 54
                }
            },
            '23': {
                start: {
                    line: 88,
                    column: 8
                },
                end: {
                    line: 88,
                    column: 39
                }
            },
            '24': {
                start: {
                    line: 89,
                    column: 8
                },
                end: {
                    line: 89,
                    column: 26
                }
            },
            '25': {
                start: {
                    line: 90,
                    column: 8
                },
                end: {
                    line: 90,
                    column: 21
                }
            },
            '26': {
                start: {
                    line: 99,
                    column: 8
                },
                end: {
                    line: 99,
                    column: 35
                }
            },
            '27': {
                start: {
                    line: 107,
                    column: 8
                },
                end: {
                    line: 107,
                    column: 59
                }
            },
            '28': {
                start: {
                    line: 108,
                    column: 22
                },
                end: {
                    line: 108,
                    column: 44
                }
            },
            '29': {
                start: {
                    line: 109,
                    column: 8
                },
                end: {
                    line: 113,
                    column: 9
                }
            },
            '30': {
                start: {
                    line: 110,
                    column: 12
                },
                end: {
                    line: 110,
                    column: 29
                }
            },
            '31': {
                start: {
                    line: 111,
                    column: 12
                },
                end: {
                    line: 111,
                    column: 39
                }
            },
            '32': {
                start: {
                    line: 112,
                    column: 12
                },
                end: {
                    line: 112,
                    column: 39
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 6,
                        column: 4
                    },
                    end: {
                        line: 6,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 6,
                        column: 18
                    },
                    end: {
                        line: 10,
                        column: 5
                    }
                },
                line: 6
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 29,
                        column: 4
                    },
                    end: {
                        line: 29,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 29,
                        column: 30
                    },
                    end: {
                        line: 43,
                        column: 5
                    }
                },
                line: 29
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 50,
                        column: 4
                    },
                    end: {
                        line: 50,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 50,
                        column: 17
                    },
                    end: {
                        line: 52,
                        column: 5
                    }
                },
                line: 50
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 58,
                        column: 4
                    },
                    end: {
                        line: 58,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 58,
                        column: 13
                    },
                    end: {
                        line: 62,
                        column: 5
                    }
                },
                line: 58
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 69,
                        column: 4
                    },
                    end: {
                        line: 69,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 69,
                        column: 15
                    },
                    end: {
                        line: 78,
                        column: 5
                    }
                },
                line: 69
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 86,
                        column: 4
                    },
                    end: {
                        line: 86,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 86,
                        column: 20
                    },
                    end: {
                        line: 91,
                        column: 5
                    }
                },
                line: 86
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 98,
                        column: 4
                    },
                    end: {
                        line: 98,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 98,
                        column: 13
                    },
                    end: {
                        line: 100,
                        column: 5
                    }
                },
                line: 98
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 106,
                        column: 4
                    },
                    end: {
                        line: 106,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 106,
                        column: 13
                    },
                    end: {
                        line: 114,
                        column: 5
                    }
                },
                line: 106
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 30,
                        column: 8
                    },
                    end: {
                        line: 30,
                        column: 48
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 30,
                        column: 8
                    },
                    end: {
                        line: 30,
                        column: 48
                    }
                }, {
                    start: {
                        line: 30,
                        column: 8
                    },
                    end: {
                        line: 30,
                        column: 48
                    }
                }],
                line: 30
            },
            '1': {
                loc: {
                    start: {
                        line: 38,
                        column: 16
                    },
                    end: {
                        line: 40,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 38,
                        column: 16
                    },
                    end: {
                        line: 40,
                        column: 17
                    }
                }, {
                    start: {
                        line: 38,
                        column: 16
                    },
                    end: {
                        line: 40,
                        column: 17
                    }
                }],
                line: 38
            },
            '2': {
                loc: {
                    start: {
                        line: 73,
                        column: 12
                    },
                    end: {
                        line: 75,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 73,
                        column: 12
                    },
                    end: {
                        line: 75,
                        column: 13
                    }
                }, {
                    start: {
                        line: 73,
                        column: 12
                    },
                    end: {
                        line: 75,
                        column: 13
                    }
                }],
                line: 73
            },
            '3': {
                loc: {
                    start: {
                        line: 87,
                        column: 8
                    },
                    end: {
                        line: 87,
                        column: 54
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 87,
                        column: 8
                    },
                    end: {
                        line: 87,
                        column: 54
                    }
                }, {
                    start: {
                        line: 87,
                        column: 8
                    },
                    end: {
                        line: 87,
                        column: 54
                    }
                }],
                line: 87
            },
            '4': {
                loc: {
                    start: {
                        line: 87,
                        column: 12
                    },
                    end: {
                        line: 87,
                        column: 45
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 87,
                        column: 12
                    },
                    end: {
                        line: 87,
                        column: 29
                    }
                }, {
                    start: {
                        line: 87,
                        column: 33
                    },
                    end: {
                        line: 87,
                        column: 45
                    }
                }],
                line: 87
            },
            '5': {
                loc: {
                    start: {
                        line: 107,
                        column: 14
                    },
                    end: {
                        line: 107,
                        column: 58
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 107,
                        column: 41
                    },
                    end: {
                        line: 107,
                        column: 52
                    }
                }, {
                    start: {
                        line: 107,
                        column: 55
                    },
                    end: {
                        line: 107,
                        column: 58
                    }
                }],
                line: 107
            },
            '6': {
                loc: {
                    start: {
                        line: 109,
                        column: 8
                    },
                    end: {
                        line: 113,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 109,
                        column: 8
                    },
                    end: {
                        line: 113,
                        column: 9
                    }
                }, {
                    start: {
                        line: 109,
                        column: 8
                    },
                    end: {
                        line: 113,
                        column: 9
                    }
                }],
                line: 109
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0],
            '6': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}(); /**
      * Created by evio on 2017/6/20.
      */


var _events = require('./events');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Dictionary = function (_EventEmitter) {
    (0, _inherits3.default)(Dictionary, _EventEmitter);

    function Dictionary() {
        (0, _classCallCheck3.default)(this, Dictionary);
        cov_5jwsx5i7t.f[0]++;
        cov_5jwsx5i7t.s[0]++;

        var _this = (0, _possibleConstructorReturn3.default)(this, (Dictionary.__proto__ || Object.getPrototypeOf(Dictionary)).call(this));

        cov_5jwsx5i7t.s[1]++;

        _this.variables = {};
        cov_5jwsx5i7t.s[2]++;
        _this.maps = [];
        return _this;
    }

    /**
     * 定义对象在class类上的getter与setter
     * 同时绑定监听
     * @param key
     * @returns {*}
     * @private
     *
     * @example
     *
     *  this.on('abc', (newValue, oldValue) => {
     *      console.log(newValue, oldValue);
     *  });
     *
     *  this.set('abc', 123);
     *  this.set('abc', 456);
     *  @watcher [456, 123]
     */


    (0, _createClass3.default)(Dictionary, [{
        key: '__defineDescriptor__',
        value: function __defineDescriptor__(key) {
            cov_5jwsx5i7t.f[1]++;
            cov_5jwsx5i7t.s[3]++;

            if (this.maps.indexOf(key) > -1) {
                    cov_5jwsx5i7t.b[0][0]++;
                    cov_5jwsx5i7t.s[4]++;
                    return;
                } else {
                cov_5jwsx5i7t.b[0][1]++;
            }cov_5jwsx5i7t.s[5]++;
            this.maps.push(key);
            cov_5jwsx5i7t.s[6]++;
            Object.defineProperty(this, key, {
                configurable: true,
                get: function get() {
                    cov_5jwsx5i7t.s[7]++;
                    return this.get(key);
                },
                set: function set(value) {
                    var old = (cov_5jwsx5i7t.s[8]++, this.variables[key]);
                    cov_5jwsx5i7t.s[9]++;
                    this.variables[key] = value;
                    cov_5jwsx5i7t.s[10]++;
                    if (old !== value) {
                        cov_5jwsx5i7t.b[1][0]++;
                        cov_5jwsx5i7t.s[11]++;

                        this.emit(key, value, old);
                    } else {
                        cov_5jwsx5i7t.b[1][1]++;
                    }
                }
            });
        }

        /**
         * 判断某个值存在或有效
         * @param mark
         * @returns {boolean}
         */

    }, {
        key: 'exists',
        value: function exists(mark) {
            cov_5jwsx5i7t.f[2]++;
            cov_5jwsx5i7t.s[12]++;

            return !!this.variables[mark];
        }

        /**
         * 遍历数据方法
         * @param fn
         */

    }, {
        key: 'each',
        value: function each(fn) {
            cov_5jwsx5i7t.f[3]++;
            cov_5jwsx5i7t.s[13]++;

            for (var i in this.variables) {
                cov_5jwsx5i7t.s[14]++;

                fn(i, this.variables[i]);
            }
        }

        /**
         * 过滤符合条件的数据
         * @param fn
         * @returns {{}}
         */

    }, {
        key: 'filter',
        value: function filter(fn) {
            cov_5jwsx5i7t.f[4]++;

            var result = (cov_5jwsx5i7t.s[15]++, {});
            cov_5jwsx5i7t.s[16]++;
            for (var i in this.variables) {
                var value = (cov_5jwsx5i7t.s[17]++, fn(i, this.variables[i]));
                cov_5jwsx5i7t.s[18]++;
                if (value) {
                    cov_5jwsx5i7t.b[2][0]++;
                    cov_5jwsx5i7t.s[19]++;

                    result[i] = this.variables[i];
                } else {
                    cov_5jwsx5i7t.b[2][1]++;
                }
            }
            cov_5jwsx5i7t.s[20]++;
            return result;
        }

        /**
         * 设置一个值
         * @param key
         * @param value
         * @returns {*}
         */

    }, {
        key: 'set',
        value: function set(key, value) {
            cov_5jwsx5i7t.f[5]++;
            cov_5jwsx5i7t.s[21]++;

            if ((cov_5jwsx5i7t.b[4][0]++, key === undefined) || (cov_5jwsx5i7t.b[4][1]++, key === null)) {
                    cov_5jwsx5i7t.b[3][0]++;
                    cov_5jwsx5i7t.s[22]++;
                    return;
                } else {
                cov_5jwsx5i7t.b[3][1]++;
            }cov_5jwsx5i7t.s[23]++;
            this.__defineDescriptor__(key);
            cov_5jwsx5i7t.s[24]++;
            this[key] = value;
            cov_5jwsx5i7t.s[25]++;
            return value;
        }

        /**
         * 获取一个值
         * @param key
         * @returns {*}
         */

    }, {
        key: 'get',
        value: function get(key) {
            cov_5jwsx5i7t.f[6]++;
            cov_5jwsx5i7t.s[26]++;

            return this.variables[key];
        }

        /**
         * 删除一个值
         * @param key
         */

    }, {
        key: 'del',
        value: function del(key) {
            cov_5jwsx5i7t.f[7]++;
            cov_5jwsx5i7t.s[27]++;

            key = typeof key === 'number' ? (cov_5jwsx5i7t.b[5][0]++, String(key)) : (cov_5jwsx5i7t.b[5][1]++, key);
            var index = (cov_5jwsx5i7t.s[28]++, this.maps.indexOf(key));
            cov_5jwsx5i7t.s[29]++;
            if (index > -1) {
                cov_5jwsx5i7t.b[6][0]++;
                cov_5jwsx5i7t.s[30]++;

                delete this[key];
                cov_5jwsx5i7t.s[31]++;
                delete this.variables[key];
                cov_5jwsx5i7t.s[32]++;
                this.maps.splice(index, 1);
            } else {
                cov_5jwsx5i7t.b[6][1]++;
            }
        }
    }]);
    return Dictionary;
}(_events.EventEmitter);

exports.default = Dictionary;
module.exports = exports['default'];