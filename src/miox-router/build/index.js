'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var cov_23hmlfyn73 = function () {
  var path = '/Users/shenyunjie/CodeBox/miox/src/miox-router/src/index.js',
      hash = '092980cdcd157d1afcc5e16efdd3952f32b93af7',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/shenyunjie/CodeBox/miox/src/miox-router/src/index.js',
    statementMap: {
      '0': {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 6,
          column: 21
        }
      },
      '1': {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 7,
          column: 50
        }
      },
      '2': {
        start: {
          line: 8,
          column: 4
        },
        end: {
          line: 8,
          column: 21
        }
      },
      '3': {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 9,
          column: 20
        }
      },
      '4': {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 23,
          column: 31
        }
      },
      '5': {
        start: {
          line: 157,
          column: 4
        },
        end: {
          line: 163,
          column: 5
        }
      },
      '6': {
        start: {
          line: 158,
          column: 6
        },
        end: {
          line: 158,
          column: 60
        }
      },
      '7': {
        start: {
          line: 160,
          column: 6
        },
        end: {
          line: 160,
          column: 60
        }
      },
      '8': {
        start: {
          line: 161,
          column: 6
        },
        end: {
          line: 161,
          column: 18
        }
      },
      '9': {
        start: {
          line: 162,
          column: 6
        },
        end: {
          line: 162,
          column: 18
        }
      },
      '10': {
        start: {
          line: 165,
          column: 4
        },
        end: {
          line: 170,
          column: 6
        }
      },
      '11': {
        start: {
          line: 172,
          column: 4
        },
        end: {
          line: 172,
          column: 16
        }
      },
      '12': {
        start: {
          line: 205,
          column: 19
        },
        end: {
          line: 205,
          column: 23
        }
      },
      '13': {
        start: {
          line: 206,
          column: 23
        },
        end: {
          line: 206,
          column: 60
        }
      },
      '14': {
        start: {
          line: 207,
          column: 15
        },
        end: {
          line: 207,
          column: 21
        }
      },
      '15': {
        start: {
          line: 210,
          column: 4
        },
        end: {
          line: 213,
          column: 5
        }
      },
      '16': {
        start: {
          line: 211,
          column: 6
        },
        end: {
          line: 211,
          column: 92
        }
      },
      '17': {
        start: {
          line: 211,
          column: 33
        },
        end: {
          line: 211,
          column: 90
        }
      },
      '18': {
        start: {
          line: 212,
          column: 6
        },
        end: {
          line: 212,
          column: 18
        }
      },
      '19': {
        start: {
          line: 215,
          column: 18
        },
        end: {
          line: 215,
          column: 51
        }
      },
      '20': {
        start: {
          line: 216,
          column: 4
        },
        end: {
          line: 218,
          column: 5
        }
      },
      '21': {
        start: {
          line: 217,
          column: 6
        },
        end: {
          line: 217,
          column: 32
        }
      },
      '22': {
        start: {
          line: 220,
          column: 4
        },
        end: {
          line: 237,
          column: 7
        }
      },
      '23': {
        start: {
          line: 221,
          column: 6
        },
        end: {
          line: 236,
          column: 7
        }
      },
      '24': {
        start: {
          line: 222,
          column: 8
        },
        end: {
          line: 226,
          column: 11
        }
      },
      '25': {
        start: {
          line: 223,
          column: 10
        },
        end: {
          line: 223,
          column: 48
        }
      },
      '26': {
        start: {
          line: 223,
          column: 20
        },
        end: {
          line: 223,
          column: 48
        }
      },
      '27': {
        start: {
          line: 224,
          column: 10
        },
        end: {
          line: 224,
          column: 76
        }
      },
      '28': {
        start: {
          line: 224,
          column: 34
        },
        end: {
          line: 224,
          column: 76
        }
      },
      '29': {
        start: {
          line: 225,
          column: 10
        },
        end: {
          line: 225,
          column: 41
        }
      },
      '30': {
        start: {
          line: 228,
          column: 8
        },
        end: {
          line: 230,
          column: 9
        }
      },
      '31': {
        start: {
          line: 229,
          column: 10
        },
        end: {
          line: 229,
          column: 93
        }
      },
      '32': {
        start: {
          line: 229,
          column: 52
        },
        end: {
          line: 229,
          column: 91
        }
      },
      '33': {
        start: {
          line: 232,
          column: 8
        },
        end: {
          line: 235,
          column: 11
        }
      },
      '34': {
        start: {
          line: 239,
          column: 4
        },
        end: {
          line: 239,
          column: 16
        }
      },
      '35': {
        start: {
          line: 255,
          column: 4
        },
        end: {
          line: 255,
          column: 39
        }
      },
      '36': {
        start: {
          line: 256,
          column: 4
        },
        end: {
          line: 256,
          column: 30
        }
      },
      '37': {
        start: {
          line: 257,
          column: 4
        },
        end: {
          line: 257,
          column: 57
        }
      },
      '38': {
        start: {
          line: 257,
          column: 32
        },
        end: {
          line: 257,
          column: 55
        }
      },
      '39': {
        start: {
          line: 258,
          column: 4
        },
        end: {
          line: 258,
          column: 16
        }
      },
      '40': {
        start: {
          line: 269,
          column: 19
        },
        end: {
          line: 269,
          column: 23
        }
      },
      '41': {
        start: {
          line: 270,
          column: 21
        },
        end: {
          line: 302,
          column: 5
        }
      },
      '42': {
        start: {
          line: 271,
          column: 19
        },
        end: {
          line: 271,
          column: 35
        }
      },
      '43': {
        start: {
          line: 272,
          column: 22
        },
        end: {
          line: 272,
          column: 49
        }
      },
      '44': {
        start: {
          line: 275,
          column: 6
        },
        end: {
          line: 279,
          column: 7
        }
      },
      '45': {
        start: {
          line: 276,
          column: 8
        },
        end: {
          line: 276,
          column: 58
        }
      },
      '46': {
        start: {
          line: 278,
          column: 8
        },
        end: {
          line: 278,
          column: 35
        }
      },
      '47': {
        start: {
          line: 281,
          column: 6
        },
        end: {
          line: 281,
          column: 26
        }
      },
      '48': {
        start: {
          line: 283,
          column: 6
        },
        end: {
          line: 283,
          column: 40
        }
      },
      '49': {
        start: {
          line: 283,
          column: 26
        },
        end: {
          line: 283,
          column: 40
        }
      },
      '50': {
        start: {
          line: 285,
          column: 28
        },
        end: {
          line: 285,
          column: 49
        }
      },
      '51': {
        start: {
          line: 286,
          column: 32
        },
        end: {
          line: 286,
          column: 71
        }
      },
      '52': {
        start: {
          line: 287,
          column: 6
        },
        end: {
          line: 287,
          column: 49
        }
      },
      '53': {
        start: {
          line: 288,
          column: 6
        },
        end: {
          line: 290,
          column: 7
        }
      },
      '54': {
        start: {
          line: 289,
          column: 8
        },
        end: {
          line: 289,
          column: 55
        }
      },
      '55': {
        start: {
          line: 292,
          column: 6
        },
        end: {
          line: 299,
          column: 13
        }
      },
      '56': {
        start: {
          line: 293,
          column: 8
        },
        end: {
          line: 297,
          column: 11
        }
      },
      '57': {
        start: {
          line: 294,
          column: 10
        },
        end: {
          line: 294,
          column: 60
        }
      },
      '58': {
        start: {
          line: 295,
          column: 10
        },
        end: {
          line: 295,
          column: 68
        }
      },
      '59': {
        start: {
          line: 296,
          column: 10
        },
        end: {
          line: 296,
          column: 24
        }
      },
      '60': {
        start: {
          line: 298,
          column: 8
        },
        end: {
          line: 298,
          column: 40
        }
      },
      '61': {
        start: {
          line: 301,
          column: 6
        },
        end: {
          line: 301,
          column: 44
        }
      },
      '62': {
        start: {
          line: 304,
          column: 4
        },
        end: {
          line: 304,
          column: 27
        }
      },
      '63': {
        start: {
          line: 306,
          column: 4
        },
        end: {
          line: 306,
          column: 20
        }
      },
      '64': {
        start: {
          line: 331,
          column: 4
        },
        end: {
          line: 333,
          column: 5
        }
      },
      '65': {
        start: {
          line: 332,
          column: 6
        },
        end: {
          line: 332,
          column: 32
        }
      },
      '66': {
        start: {
          line: 336,
          column: 4
        },
        end: {
          line: 338,
          column: 5
        }
      },
      '67': {
        start: {
          line: 337,
          column: 6
        },
        end: {
          line: 337,
          column: 42
        }
      },
      '68': {
        start: {
          line: 340,
          column: 4
        },
        end: {
          line: 342,
          column: 7
        }
      },
      '69': {
        start: {
          line: 341,
          column: 6
        },
        end: {
          line: 341,
          column: 38
        }
      },
      '70': {
        start: {
          line: 355,
          column: 19
        },
        end: {
          line: 355,
          column: 23
        }
      },
      '71': {
        start: {
          line: 356,
          column: 18
        },
        end: {
          line: 356,
          column: 28
        }
      },
      '72': {
        start: {
          line: 359,
          column: 4
        },
        end: {
          line: 362,
          column: 5
        }
      },
      '73': {
        start: {
          line: 360,
          column: 6
        },
        end: {
          line: 360,
          column: 84
        }
      },
      '74': {
        start: {
          line: 360,
          column: 24
        },
        end: {
          line: 360,
          column: 82
        }
      },
      '75': {
        start: {
          line: 361,
          column: 6
        },
        end: {
          line: 361,
          column: 18
        }
      },
      '76': {
        start: {
          line: 365,
          column: 18
        },
        end: {
          line: 372,
          column: 6
        }
      },
      '77': {
        start: {
          line: 374,
          column: 4
        },
        end: {
          line: 376,
          column: 5
        }
      },
      '78': {
        start: {
          line: 375,
          column: 6
        },
        end: {
          line: 375,
          column: 40
        }
      },
      '79': {
        start: {
          line: 379,
          column: 4
        },
        end: {
          line: 379,
          column: 86
        }
      },
      '80': {
        start: {
          line: 379,
          column: 46
        },
        end: {
          line: 379,
          column: 84
        }
      },
      '81': {
        start: {
          line: 380,
          column: 4
        },
        end: {
          line: 380,
          column: 22
        }
      },
      '82': {
        start: {
          line: 381,
          column: 4
        },
        end: {
          line: 381,
          column: 17
        }
      },
      '83': {
        start: {
          line: 391,
          column: 19
        },
        end: {
          line: 391,
          column: 29
        }
      },
      '84': {
        start: {
          line: 393,
          column: 4
        },
        end: {
          line: 397,
          column: 5
        }
      },
      '85': {
        start: {
          line: 394,
          column: 6
        },
        end: {
          line: 396,
          column: 7
        }
      },
      '86': {
        start: {
          line: 395,
          column: 8
        },
        end: {
          line: 395,
          column: 25
        }
      },
      '87': {
        start: {
          line: 399,
          column: 4
        },
        end: {
          line: 399,
          column: 17
        }
      },
      '88': {
        start: {
          line: 429,
          column: 18
        },
        end: {
          line: 429,
          column: 34
        }
      },
      '89': {
        start: {
          line: 431,
          column: 4
        },
        end: {
          line: 434,
          column: 5
        }
      },
      '90': {
        start: {
          line: 432,
          column: 19
        },
        end: {
          line: 432,
          column: 59
        }
      },
      '91': {
        start: {
          line: 433,
          column: 6
        },
        end: {
          line: 433,
          column: 42
        }
      },
      '92': {
        start: {
          line: 436,
          column: 4
        },
        end: {
          line: 436,
          column: 57
        }
      },
      '93': {
        start: {
          line: 449,
          column: 19
        },
        end: {
          line: 449,
          column: 29
        }
      },
      '94': {
        start: {
          line: 451,
          column: 20
        },
        end: {
          line: 455,
          column: 5
        }
      },
      '95': {
        start: {
          line: 457,
          column: 4
        },
        end: {
          line: 468,
          column: 5
        }
      },
      '96': {
        start: {
          line: 458,
          column: 6
        },
        end: {
          line: 458,
          column: 24
        }
      },
      '97': {
        start: {
          line: 460,
          column: 6
        },
        end: {
          line: 467,
          column: 7
        }
      },
      '98': {
        start: {
          line: 461,
          column: 8
        },
        end: {
          line: 461,
          column: 33
        }
      },
      '99': {
        start: {
          line: 463,
          column: 8
        },
        end: {
          line: 466,
          column: 9
        }
      },
      '100': {
        start: {
          line: 464,
          column: 10
        },
        end: {
          line: 464,
          column: 44
        }
      },
      '101': {
        start: {
          line: 465,
          column: 10
        },
        end: {
          line: 465,
          column: 57
        }
      },
      '102': {
        start: {
          line: 465,
          column: 36
        },
        end: {
          line: 465,
          column: 57
        }
      },
      '103': {
        start: {
          line: 470,
          column: 4
        },
        end: {
          line: 470,
          column: 19
        }
      },
      '104': {
        start: {
          line: 503,
          column: 4
        },
        end: {
          line: 503,
          column: 36
        }
      },
      '105': {
        start: {
          line: 504,
          column: 4
        },
        end: {
          line: 504,
          column: 64
        }
      },
      '106': {
        start: {
          line: 504,
          column: 32
        },
        end: {
          line: 504,
          column: 62
        }
      },
      '107': {
        start: {
          line: 505,
          column: 4
        },
        end: {
          line: 505,
          column: 16
        }
      },
      '108': {
        start: {
          line: 523,
          column: 4
        },
        end: {
          line: 523,
          column: 58
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 5,
            column: 2
          },
          end: {
            line: 5,
            column: 3
          }
        },
        loc: {
          start: {
            line: 5,
            column: 25
          },
          end: {
            line: 10,
            column: 3
          }
        },
        line: 5
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 22,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        },
        loc: {
          start: {
            line: 22,
            column: 15
          },
          end: {
            line: 24,
            column: 3
          }
        },
        line: 22
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 156,
            column: 2
          },
          end: {
            line: 156,
            column: 3
          }
        },
        loc: {
          start: {
            line: 156,
            column: 32
          },
          end: {
            line: 173,
            column: 3
          }
        },
        line: 156
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 204,
            column: 2
          },
          end: {
            line: 204,
            column: 3
          }
        },
        loc: {
          start: {
            line: 204,
            column: 8
          },
          end: {
            line: 240,
            column: 3
          }
        },
        line: 204
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 211,
            column: 28
          },
          end: {
            line: 211,
            column: 29
          }
        },
        loc: {
          start: {
            line: 211,
            column: 33
          },
          end: {
            line: 211,
            column: 90
          }
        },
        line: 211
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 220,
            column: 23
          },
          end: {
            line: 220,
            column: 24
          }
        },
        loc: {
          start: {
            line: 220,
            column: 28
          },
          end: {
            line: 237,
            column: 5
          }
        },
        line: 220
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 222,
            column: 31
          },
          end: {
            line: 222,
            column: 32
          }
        },
        loc: {
          start: {
            line: 222,
            column: 46
          },
          end: {
            line: 226,
            column: 9
          }
        },
        line: 222
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 229,
            column: 45
          },
          end: {
            line: 229,
            column: 46
          }
        },
        loc: {
          start: {
            line: 229,
            column: 52
          },
          end: {
            line: 229,
            column: 91
          }
        },
        line: 229
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 254,
            column: 2
          },
          end: {
            line: 254,
            column: 3
          }
        },
        loc: {
          start: {
            line: 254,
            column: 17
          },
          end: {
            line: 259,
            column: 3
          }
        },
        line: 254
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 257,
            column: 23
          },
          end: {
            line: 257,
            column: 24
          }
        },
        loc: {
          start: {
            line: 257,
            column: 32
          },
          end: {
            line: 257,
            column: 55
          }
        },
        line: 257
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 268,
            column: 2
          },
          end: {
            line: 268,
            column: 3
          }
        },
        loc: {
          start: {
            line: 268,
            column: 11
          },
          end: {
            line: 307,
            column: 3
          }
        },
        line: 268
      },
      '11': {
        name: 'dispatch',
        decl: {
          start: {
            line: 270,
            column: 30
          },
          end: {
            line: 270,
            column: 38
          }
        },
        loc: {
          start: {
            line: 270,
            column: 50
          },
          end: {
            line: 302,
            column: 5
          }
        },
        line: 270
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 292,
            column: 40
          },
          end: {
            line: 292,
            column: 41
          }
        },
        loc: {
          start: {
            line: 292,
            column: 63
          },
          end: {
            line: 299,
            column: 7
          }
        },
        line: 292
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 293,
            column: 18
          },
          end: {
            line: 293,
            column: 19
          }
        },
        loc: {
          start: {
            line: 293,
            column: 39
          },
          end: {
            line: 297,
            column: 9
          }
        },
        line: 293
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 330,
            column: 2
          },
          end: {
            line: 330,
            column: 3
          }
        },
        loc: {
          start: {
            line: 330,
            column: 32
          },
          end: {
            line: 343,
            column: 3
          }
        },
        line: 330
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 340,
            column: 28
          },
          end: {
            line: 340,
            column: 29
          }
        },
        loc: {
          start: {
            line: 340,
            column: 49
          },
          end: {
            line: 342,
            column: 5
          }
        },
        line: 340
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 354,
            column: 2
          },
          end: {
            line: 354,
            column: 3
          }
        },
        loc: {
          start: {
            line: 354,
            column: 49
          },
          end: {
            line: 382,
            column: 3
          }
        },
        line: 354
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 360,
            column: 19
          },
          end: {
            line: 360,
            column: 20
          }
        },
        loc: {
          start: {
            line: 360,
            column: 24
          },
          end: {
            line: 360,
            column: 82
          }
        },
        line: 360
      },
      '18': {
        name: '(anonymous_18)',
        decl: {
          start: {
            line: 379,
            column: 37
          },
          end: {
            line: 379,
            column: 38
          }
        },
        loc: {
          start: {
            line: 379,
            column: 46
          },
          end: {
            line: 379,
            column: 84
          }
        },
        line: 379
      },
      '19': {
        name: '(anonymous_19)',
        decl: {
          start: {
            line: 390,
            column: 2
          },
          end: {
            line: 390,
            column: 3
          }
        },
        loc: {
          start: {
            line: 390,
            column: 14
          },
          end: {
            line: 400,
            column: 3
          }
        },
        line: 390
      },
      '20': {
        name: '(anonymous_20)',
        decl: {
          start: {
            line: 428,
            column: 2
          },
          end: {
            line: 428,
            column: 3
          }
        },
        loc: {
          start: {
            line: 428,
            column: 20
          },
          end: {
            line: 437,
            column: 3
          }
        },
        line: 428
      },
      '21': {
        name: '(anonymous_21)',
        decl: {
          start: {
            line: 448,
            column: 2
          },
          end: {
            line: 448,
            column: 3
          }
        },
        loc: {
          start: {
            line: 448,
            column: 22
          },
          end: {
            line: 471,
            column: 3
          }
        },
        line: 448
      },
      '22': {
        name: '(anonymous_22)',
        decl: {
          start: {
            line: 502,
            column: 2
          },
          end: {
            line: 502,
            column: 3
          }
        },
        loc: {
          start: {
            line: 502,
            column: 27
          },
          end: {
            line: 506,
            column: 3
          }
        },
        line: 502
      },
      '23': {
        name: '(anonymous_23)',
        decl: {
          start: {
            line: 504,
            column: 23
          },
          end: {
            line: 504,
            column: 24
          }
        },
        loc: {
          start: {
            line: 504,
            column: 32
          },
          end: {
            line: 504,
            column: 62
          }
        },
        line: 504
      },
      '24': {
        name: '(anonymous_24)',
        decl: {
          start: {
            line: 522,
            column: 2
          },
          end: {
            line: 522,
            column: 3
          }
        },
        loc: {
          start: {
            line: 522,
            column: 27
          },
          end: {
            line: 524,
            column: 3
          }
        },
        line: 522
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 5,
            column: 14
          },
          end: {
            line: 5,
            column: 23
          }
        },
        type: 'default-arg',
        locations: [{
          start: {
            line: 5,
            column: 21
          },
          end: {
            line: 5,
            column: 23
          }
        }],
        line: 5
      },
      '1': {
        loc: {
          start: {
            line: 7,
            column: 19
          },
          end: {
            line: 7,
            column: 49
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 7,
            column: 19
          },
          end: {
            line: 7,
            column: 36
          }
        }, {
          start: {
            line: 7,
            column: 40
          },
          end: {
            line: 7,
            column: 49
          }
        }],
        line: 7
      },
      '2': {
        loc: {
          start: {
            line: 157,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 157,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        }, {
          start: {
            line: 157,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        }],
        line: 157
      },
      '3': {
        loc: {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 157,
            column: 58
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 157,
            column: 32
          }
        }, {
          start: {
            line: 157,
            column: 36
          },
          end: {
            line: 157,
            column: 58
          }
        }],
        line: 157
      },
      '4': {
        loc: {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        }, {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        }],
        line: 210
      },
      '5': {
        loc: {
          start: {
            line: 210,
            column: 8
          },
          end: {
            line: 210,
            column: 76
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 210,
            column: 8
          },
          end: {
            line: 210,
            column: 36
          }
        }, {
          start: {
            line: 210,
            column: 40
          },
          end: {
            line: 210,
            column: 76
          }
        }],
        line: 210
      },
      '6': {
        loc: {
          start: {
            line: 216,
            column: 4
          },
          end: {
            line: 218,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 216,
            column: 4
          },
          end: {
            line: 218,
            column: 5
          }
        }, {
          start: {
            line: 216,
            column: 4
          },
          end: {
            line: 218,
            column: 5
          }
        }],
        line: 216
      },
      '7': {
        loc: {
          start: {
            line: 221,
            column: 6
          },
          end: {
            line: 236,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 221,
            column: 6
          },
          end: {
            line: 236,
            column: 7
          }
        }, {
          start: {
            line: 221,
            column: 6
          },
          end: {
            line: 236,
            column: 7
          }
        }],
        line: 221
      },
      '8': {
        loc: {
          start: {
            line: 223,
            column: 10
          },
          end: {
            line: 223,
            column: 48
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 223,
            column: 10
          },
          end: {
            line: 223,
            column: 48
          }
        }, {
          start: {
            line: 223,
            column: 10
          },
          end: {
            line: 223,
            column: 48
          }
        }],
        line: 223
      },
      '9': {
        loc: {
          start: {
            line: 224,
            column: 10
          },
          end: {
            line: 224,
            column: 76
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 224,
            column: 10
          },
          end: {
            line: 224,
            column: 76
          }
        }, {
          start: {
            line: 224,
            column: 10
          },
          end: {
            line: 224,
            column: 76
          }
        }],
        line: 224
      },
      '10': {
        loc: {
          start: {
            line: 228,
            column: 8
          },
          end: {
            line: 230,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 228,
            column: 8
          },
          end: {
            line: 230,
            column: 9
          }
        }, {
          start: {
            line: 228,
            column: 8
          },
          end: {
            line: 230,
            column: 9
          }
        }],
        line: 228
      },
      '11': {
        loc: {
          start: {
            line: 275,
            column: 6
          },
          end: {
            line: 279,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 275,
            column: 6
          },
          end: {
            line: 279,
            column: 7
          }
        }, {
          start: {
            line: 275,
            column: 6
          },
          end: {
            line: 279,
            column: 7
          }
        }],
        line: 275
      },
      '12': {
        loc: {
          start: {
            line: 283,
            column: 6
          },
          end: {
            line: 283,
            column: 40
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 283,
            column: 6
          },
          end: {
            line: 283,
            column: 40
          }
        }, {
          start: {
            line: 283,
            column: 6
          },
          end: {
            line: 283,
            column: 40
          }
        }],
        line: 283
      },
      '13': {
        loc: {
          start: {
            line: 288,
            column: 6
          },
          end: {
            line: 290,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 288,
            column: 6
          },
          end: {
            line: 290,
            column: 7
          }
        }, {
          start: {
            line: 288,
            column: 6
          },
          end: {
            line: 290,
            column: 7
          }
        }],
        line: 288
      },
      '14': {
        loc: {
          start: {
            line: 331,
            column: 4
          },
          end: {
            line: 333,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 331,
            column: 4
          },
          end: {
            line: 333,
            column: 5
          }
        }, {
          start: {
            line: 331,
            column: 4
          },
          end: {
            line: 333,
            column: 5
          }
        }],
        line: 331
      },
      '15': {
        loc: {
          start: {
            line: 336,
            column: 4
          },
          end: {
            line: 338,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 336,
            column: 4
          },
          end: {
            line: 338,
            column: 5
          }
        }, {
          start: {
            line: 336,
            column: 4
          },
          end: {
            line: 338,
            column: 5
          }
        }],
        line: 336
      },
      '16': {
        loc: {
          start: {
            line: 354,
            column: 38
          },
          end: {
            line: 354,
            column: 47
          }
        },
        type: 'default-arg',
        locations: [{
          start: {
            line: 354,
            column: 45
          },
          end: {
            line: 354,
            column: 47
          }
        }],
        line: 354
      },
      '17': {
        loc: {
          start: {
            line: 359,
            column: 4
          },
          end: {
            line: 362,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 359,
            column: 4
          },
          end: {
            line: 362,
            column: 5
          }
        }, {
          start: {
            line: 359,
            column: 4
          },
          end: {
            line: 362,
            column: 5
          }
        }],
        line: 359
      },
      '18': {
        loc: {
          start: {
            line: 366,
            column: 11
          },
          end: {
            line: 366,
            column: 47
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 366,
            column: 32
          },
          end: {
            line: 366,
            column: 40
          }
        }, {
          start: {
            line: 366,
            column: 43
          },
          end: {
            line: 366,
            column: 47
          }
        }],
        line: 366
      },
      '19': {
        loc: {
          start: {
            line: 368,
            column: 17
          },
          end: {
            line: 368,
            column: 63
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 368,
            column: 17
          },
          end: {
            line: 368,
            column: 31
          }
        }, {
          start: {
            line: 368,
            column: 35
          },
          end: {
            line: 368,
            column: 54
          }
        }, {
          start: {
            line: 368,
            column: 58
          },
          end: {
            line: 368,
            column: 63
          }
        }],
        line: 368
      },
      '20': {
        loc: {
          start: {
            line: 369,
            column: 14
          },
          end: {
            line: 369,
            column: 54
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 369,
            column: 14
          },
          end: {
            line: 369,
            column: 25
          }
        }, {
          start: {
            line: 369,
            column: 29
          },
          end: {
            line: 369,
            column: 45
          }
        }, {
          start: {
            line: 369,
            column: 49
          },
          end: {
            line: 369,
            column: 54
          }
        }],
        line: 369
      },
      '21': {
        loc: {
          start: {
            line: 370,
            column: 14
          },
          end: {
            line: 370,
            column: 51
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 370,
            column: 14
          },
          end: {
            line: 370,
            column: 25
          }
        }, {
          start: {
            line: 370,
            column: 29
          },
          end: {
            line: 370,
            column: 45
          }
        }, {
          start: {
            line: 370,
            column: 49
          },
          end: {
            line: 370,
            column: 51
          }
        }],
        line: 370
      },
      '22': {
        loc: {
          start: {
            line: 374,
            column: 4
          },
          end: {
            line: 376,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 374,
            column: 4
          },
          end: {
            line: 376,
            column: 5
          }
        }, {
          start: {
            line: 374,
            column: 4
          },
          end: {
            line: 376,
            column: 5
          }
        }],
        line: 374
      },
      '23': {
        loc: {
          start: {
            line: 394,
            column: 6
          },
          end: {
            line: 396,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 394,
            column: 6
          },
          end: {
            line: 396,
            column: 7
          }
        }, {
          start: {
            line: 394,
            column: 6
          },
          end: {
            line: 396,
            column: 7
          }
        }],
        line: 394
      },
      '24': {
        loc: {
          start: {
            line: 394,
            column: 10
          },
          end: {
            line: 394,
            column: 51
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 394,
            column: 10
          },
          end: {
            line: 394,
            column: 24
          }
        }, {
          start: {
            line: 394,
            column: 28
          },
          end: {
            line: 394,
            column: 51
          }
        }],
        line: 394
      },
      '25': {
        loc: {
          start: {
            line: 431,
            column: 4
          },
          end: {
            line: 434,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 431,
            column: 4
          },
          end: {
            line: 434,
            column: 5
          }
        }, {
          start: {
            line: 431,
            column: 4
          },
          end: {
            line: 434,
            column: 5
          }
        }],
        line: 431
      },
      '26': {
        loc: {
          start: {
            line: 460,
            column: 6
          },
          end: {
            line: 467,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 460,
            column: 6
          },
          end: {
            line: 467,
            column: 7
          }
        }, {
          start: {
            line: 460,
            column: 6
          },
          end: {
            line: 467,
            column: 7
          }
        }],
        line: 460
      },
      '27': {
        loc: {
          start: {
            line: 463,
            column: 8
          },
          end: {
            line: 466,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 463,
            column: 8
          },
          end: {
            line: 466,
            column: 9
          }
        }, {
          start: {
            line: 463,
            column: 8
          },
          end: {
            line: 466,
            column: 9
          }
        }],
        line: 463
      },
      '28': {
        loc: {
          start: {
            line: 463,
            column: 12
          },
          end: {
            line: 463,
            column: 72
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 463,
            column: 12
          },
          end: {
            line: 463,
            column: 38
          }
        }, {
          start: {
            line: 463,
            column: 42
          },
          end: {
            line: 463,
            column: 72
          }
        }],
        line: 463
      },
      '29': {
        loc: {
          start: {
            line: 465,
            column: 10
          },
          end: {
            line: 465,
            column: 57
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 465,
            column: 10
          },
          end: {
            line: 465,
            column: 57
          }
        }, {
          start: {
            line: 465,
            column: 10
          },
          end: {
            line: 465,
            column: 57
          }
        }],
        line: 465
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0,
      '72': 0,
      '73': 0,
      '74': 0,
      '75': 0,
      '76': 0,
      '77': 0,
      '78': 0,
      '79': 0,
      '80': 0,
      '81': 0,
      '82': 0,
      '83': 0,
      '84': 0,
      '85': 0,
      '86': 0,
      '87': 0,
      '88': 0,
      '89': 0,
      '90': 0,
      '91': 0,
      '92': 0,
      '93': 0,
      '94': 0,
      '95': 0,
      '96': 0,
      '97': 0,
      '98': 0,
      '99': 0,
      '100': 0,
      '101': 0,
      '102': 0,
      '103': 0,
      '104': 0,
      '105': 0,
      '106': 0,
      '107': 0,
      '108': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    b: {
      '0': [0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0],
      '12': [0, 0],
      '13': [0, 0],
      '14': [0, 0],
      '15': [0, 0],
      '16': [0],
      '17': [0, 0],
      '18': [0, 0],
      '19': [0, 0, 0],
      '20': [0, 0, 0],
      '21': [0, 0, 0],
      '22': [0, 0],
      '23': [0, 0],
      '24': [0, 0],
      '25': [0, 0],
      '26': [0, 0],
      '27': [0, 0],
      '28': [0, 0],
      '29': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _mioxCompose = require('miox-compose');

var _mioxCompose2 = _interopRequireDefault(_mioxCompose);

var _layer = require('./layer');

var _layer2 = _interopRequireDefault(_layer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Router = function () {
  function Router() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (cov_23hmlfyn73.b[0][0]++, {});
    (0, _classCallCheck3.default)(this, Router);
    cov_23hmlfyn73.f[0]++;
    cov_23hmlfyn73.s[0]++;

    this.opts = opts;
    cov_23hmlfyn73.s[1]++;
    this.methods = (cov_23hmlfyn73.b[1][0]++, this.opts.methods) || (cov_23hmlfyn73.b[1][1]++, ['PATCH']);
    cov_23hmlfyn73.s[2]++;
    this.params = {};
    cov_23hmlfyn73.s[3]++;
    this.stack = [];
  }

  /**
   * Register route with all methods.
   *
   * @param {String} name Optional.
   * @param {String} path
   * @param {Function=} middleware You may also pass multiple middleware.
   * @param {Function} callback
   * @returns {Router}
   * @private
   */


  (0, _createClass3.default)(Router, [{
    key: 'all',
    value: function all() {
      cov_23hmlfyn73.f[1]++;
      cov_23hmlfyn73.s[4]++;

      return this.patch.apply(this, arguments);
    }

    /* istanbul ignore next */

  }, {
    key: 'static',
    value: function _static() {
      var _this = this;

      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _loop = function _loop(uri) {
        _this.patch(uri, function () {
          var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(ctx) {
            return _regenerator2.default.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _context.next = 2;
                    return ctx.render(options[uri]);

                  case 2:
                    return _context.abrupt('return', _context.sent);

                  case 3:
                  case 'end':
                    return _context.stop();
                }
              }
            }, _callee, _this);
          }));

          return function (_x3) {
            return _ref.apply(this, arguments);
          };
        }());
      };

      for (var uri in options) {
        _loop(uri);
      }
    }

    /**
     * Create `router.verb()` methods, where *verb* is one of the HTTP verbs such
     * as `router.get()` or `router.post()`.
     *
     * Match URL patterns to callback functions or controller actions using `router.verb()`,
     * where **verb** is one of the HTTP verbs such as `router.get()` or `router.post()`.
     *
     * Additionaly, `router.all()` can be used to match against all methods.
     *
     * ```javascript
     * router
     *   .get('/', function (ctx, next) {
     *     ctx.body = 'Hello World!';
     *   })
     *   .post('/users', function (ctx, next) {
     *     // ...
     *   })
     *   .put('/users/:id', function (ctx, next) {
     *     // ...
     *   })
     *   .del('/users/:id', function (ctx, next) {
     *     // ...
     *   })
     *   .all('/users/:id', function (ctx, next) {
     *     // ...
     *   });
     * ```
     *
     * When a route is matched, its path is available at `ctx._matchedRoute` and if named,
     * the name is available at `ctx._matchedRouteName`
     *
     * Route paths will be translated to regular expressions using
     * [path-to-regexp](https://github.com/pillarjs/path-to-regexp).
     *
     * Query strings will not be considered when matching requests.
     *
     * #### Named routes
     *
     * Routes can optionally have names. This allows generation of URLs and easy
     * renaming of URLs during development.
     *
     * ```javascript
     * router.get('user', '/users/:id', function (ctx, next) {
     *  // ...
     * });
     *
     * router.url('user', 3);
     * // => "/users/3"
     * ```
     *
     * #### Multiple middleware
     *
     * Multiple middleware may be given:
     *
     * ```javascript
     * router.get(
     *   '/users/:id',
     *   function (ctx, next) {
     *     return User.findOne(ctx.params.id).then(function(user) {
     *       ctx.user = user;
     *       next();
     *     });
     *   },
     *   function (ctx) {
     *     console.log(ctx.user);
     *     // => { id: 17, name: "Alex" }
     *   }
     * );
     * ```
     *
     * ### Nested routers
     *
     * Nesting routers is supported:
     *
     * ```javascript
     * var forums = new Router();
     * var posts = new Router();
     *
     * posts.get('/', function (ctx, next) {...});
     * posts.get('/:pid', function (ctx, next) {...});
     * forums.use('/forums/:fid/posts', posts.routes(), posts.allowedMethods());
     *
     * // responds to "/forums/123/posts" and "/forums/123/posts/123"
     * app.use(forums.routes());
     * ```
     *
     * #### Router prefixes
     *
     * Route paths can be prefixed at the router level:
     *
     * ```javascript
     * var router = new Router({
     *   prefix: '/users'
     * });
     *
     * router.get('/', ...); // responds to "/users"
     * router.get('/:id', ...); // responds to "/users/:id"
     * ```
     *
     * #### URL parameters
     *
     * Named route parameters are captured and added to `ctx.params`.
     *
     * ```javascript
     * router.get('/:category/:title', function (ctx, next) {
     *   console.log(ctx.params);
     *   // => { category: 'programming', title: 'how-to-node' }
     * });
     * ```
     *
     * The [path-to-regexp](https://github.com/pillarjs/path-to-regexp) module is
     * used to convert paths to regular expressions.
     *
     * @name get|put|post|patch|delete|del
     * @memberof module:koa-router.prototype
     * @param {String} path
     * @param {Function=} middleware route middleware(s)
     * @param {Function} callback route callback
     * @returns {Router}
     */

  }, {
    key: 'patch',
    value: function patch(name, path, middleware) {
      cov_23hmlfyn73.f[2]++;
      cov_23hmlfyn73.s[5]++;

      if ((cov_23hmlfyn73.b[3][0]++, typeof path === 'string') || (cov_23hmlfyn73.b[3][1]++, path instanceof RegExp)) {
        cov_23hmlfyn73.b[2][0]++;
        cov_23hmlfyn73.s[6]++;

        middleware = Array.prototype.slice.call(arguments, 2);
      } else {
        cov_23hmlfyn73.b[2][1]++;
        cov_23hmlfyn73.s[7]++;

        middleware = Array.prototype.slice.call(arguments, 1);
        cov_23hmlfyn73.s[8]++;
        path = name;
        cov_23hmlfyn73.s[9]++;
        name = null;
      }

      cov_23hmlfyn73.s[10]++;
      this.register(path, ['patch'], middleware, {
        name: name
      });

      cov_23hmlfyn73.s[11]++;
      return this;
    }

    /**
     * Use given middleware.
     *
     * Middleware run in the order they are defined by `.use()`. They are invoked
     * sequentially, requests start at the first middleware and work their way
     * "down" the middleware stack.
     *
     * @example
     *
     * ```javascript
     * // session middleware will run before authorize
     * router
     *   .use(session())
     *   .use(authorize());
     *
     * // use middleware only with given path
     * router.use('/users', userAuth());
     *
     * // or with an array of paths
     * router.use(['/users', '/admin'], userAuth());
     *
     * app.use(router.routes());
     * ```
     *
     * @param {String=} path
     * @param {Function} middleware
     * @param {Function=} ...
     * @returns {Router}
     */

  }, {
    key: 'use',
    value: function use() {
      cov_23hmlfyn73.f[3]++;

      var router = (cov_23hmlfyn73.s[12]++, this);
      var middleware = (cov_23hmlfyn73.s[13]++, Array.prototype.slice.call(arguments));
      var path = (cov_23hmlfyn73.s[14]++, '(.*)');

      // support array of paths
      cov_23hmlfyn73.s[15]++;
      if ((cov_23hmlfyn73.b[5][0]++, Array.isArray(middleware[0])) && (cov_23hmlfyn73.b[5][1]++, typeof middleware[0][0] === 'string')) {
        cov_23hmlfyn73.b[4][0]++;
        cov_23hmlfyn73.s[16]++;

        middleware[0].forEach(function (p) {
          cov_23hmlfyn73.f[4]++;
          cov_23hmlfyn73.s[17]++;
          return router.use.apply(router, [p].concat(middleware.slice(1)));
        });
        cov_23hmlfyn73.s[18]++;
        return this;
      } else {
        cov_23hmlfyn73.b[4][1]++;
      }

      var hasPath = (cov_23hmlfyn73.s[19]++, typeof middleware[0] === 'string');
      cov_23hmlfyn73.s[20]++;
      if (hasPath) {
        cov_23hmlfyn73.b[6][0]++;
        cov_23hmlfyn73.s[21]++;

        path = middleware.shift();
      } else {
        cov_23hmlfyn73.b[6][1]++;
      }

      cov_23hmlfyn73.s[22]++;
      middleware.forEach(function (m) {
        cov_23hmlfyn73.f[5]++;
        cov_23hmlfyn73.s[23]++;

        if (m.router) {
          cov_23hmlfyn73.b[7][0]++;
          cov_23hmlfyn73.s[24]++;

          m.router.stack.forEach(function (nestedLayer) {
            cov_23hmlfyn73.f[6]++;
            cov_23hmlfyn73.s[25]++;

            if (path) {
                cov_23hmlfyn73.b[8][0]++;
                cov_23hmlfyn73.s[26]++;
                nestedLayer.setPrefix(path);
              } else {
              cov_23hmlfyn73.b[8][1]++;
            }cov_23hmlfyn73.s[27]++;
            if (router.opts.prefix) {
                cov_23hmlfyn73.b[9][0]++;
                cov_23hmlfyn73.s[28]++;
                nestedLayer.setPrefix(router.opts.prefix);
              } else {
              cov_23hmlfyn73.b[9][1]++;
            }cov_23hmlfyn73.s[29]++;
            router.stack.push(nestedLayer);
          });

          cov_23hmlfyn73.s[30]++;
          if (router.params) {
            cov_23hmlfyn73.b[10][0]++;
            cov_23hmlfyn73.s[31]++;

            Object.keys(router.params).forEach(function (key) {
              cov_23hmlfyn73.f[7]++;
              cov_23hmlfyn73.s[32]++;
              return m.router.param(key, router.params[key]);
            });
          } else {
            cov_23hmlfyn73.b[10][1]++;
          }
        } else {
          cov_23hmlfyn73.b[7][1]++;
          cov_23hmlfyn73.s[33]++;

          router.register(path, [], m, {
            end: false,
            ignoreCaptures: !hasPath
          });
        }
      });

      cov_23hmlfyn73.s[34]++;
      return this;
    }

    /**
     * Set the path prefix for a Router instance that was already initialized.
     *
     * @example
     *
     * ```javascript
     * router.prefix('/things/:thing_id')
     * ```
     *
     * @param {String} prefix
     * @returns {Router}
     */

  }, {
    key: 'prefix',
    value: function prefix(_prefix) {
      cov_23hmlfyn73.f[8]++;
      cov_23hmlfyn73.s[35]++;

      _prefix = _prefix.replace(/\/$/, '');
      cov_23hmlfyn73.s[36]++;
      this.opts.prefix = _prefix;
      cov_23hmlfyn73.s[37]++;
      this.stack.forEach(function (route) {
        cov_23hmlfyn73.f[9]++;
        cov_23hmlfyn73.s[38]++;
        return route.setPrefix(_prefix);
      });
      cov_23hmlfyn73.s[39]++;
      return this;
    }

    /**
     * Returns router middleware which dispatches a route matching the request.
     *
     * @returns {Function}
     */
    /* istanbul ignore next */

  }, {
    key: 'middleware',
    value: function middleware() {
      return this.routes();
    }
  }, {
    key: 'routes',
    value: function routes() {
      cov_23hmlfyn73.f[10]++;

      var router = (cov_23hmlfyn73.s[40]++, this);
      cov_23hmlfyn73.s[41]++;
      var dispatch = function dispatch(ctx, next) {
        cov_23hmlfyn73.f[11]++;

        var path = (cov_23hmlfyn73.s[42]++, ctx.req.pathname);
        var matched = (cov_23hmlfyn73.s[43]++, router.match(path, 'PATCH'));
        var layerChain = void 0,
            layer = void 0,
            i = void 0;

        cov_23hmlfyn73.s[44]++;
        if (ctx.matched) {
          cov_23hmlfyn73.b[11][0]++;
          cov_23hmlfyn73.s[45]++;

          ctx.matched.push.apply(ctx.matched, matched.path);
        } else {
          cov_23hmlfyn73.b[11][1]++;
          cov_23hmlfyn73.s[46]++;

          ctx.matched = matched.path;
        }

        cov_23hmlfyn73.s[47]++;
        ctx.router = router;

        cov_23hmlfyn73.s[48]++;
        if (!matched.route) {
            cov_23hmlfyn73.b[12][0]++;
            cov_23hmlfyn73.s[49]++;
            return next();
          } else {
          cov_23hmlfyn73.b[12][1]++;
        }var matchedLayers = (cov_23hmlfyn73.s[50]++, matched.pathAndMethod);
        var mostSpecificLayer = (cov_23hmlfyn73.s[51]++, matchedLayers[matchedLayers.length - 1]);
        cov_23hmlfyn73.s[52]++;
        ctx._matchedRoute = mostSpecificLayer.path;
        cov_23hmlfyn73.s[53]++;
        if (mostSpecificLayer.name) {
          cov_23hmlfyn73.b[13][0]++;
          cov_23hmlfyn73.s[54]++;

          ctx._matchedRouteName = mostSpecificLayer.name;
        } else {
          cov_23hmlfyn73.b[13][1]++;
        }

        cov_23hmlfyn73.s[55]++;
        layerChain = matchedLayers.reduce(function (memo, layer) {
          cov_23hmlfyn73.f[12]++;
          cov_23hmlfyn73.s[56]++;

          memo.push(function (ctx, next) {
            cov_23hmlfyn73.f[13]++;
            cov_23hmlfyn73.s[57]++;

            ctx.captures = layer.captures(path, ctx.captures);
            cov_23hmlfyn73.s[58]++;
            ctx.params = layer.params(path, ctx.captures, ctx.params);
            cov_23hmlfyn73.s[59]++;
            return next();
          });
          cov_23hmlfyn73.s[60]++;
          return memo.concat(layer.stack);
        }, []);

        cov_23hmlfyn73.s[61]++;
        return (0, _mioxCompose2.default)(layerChain)(ctx, next);
      };

      cov_23hmlfyn73.s[62]++;
      dispatch.router = this;

      cov_23hmlfyn73.s[63]++;
      return dispatch;
    }

    /**
     * Redirect `source` to `destination` URL with optional 30x status `code`.
     *
     * Both `source` and `destination` can be route names.
     *
     * ```javascript
     * router.redirect('/login', 'sign-in');
     * ```
     *
     * This is equivalent to:
     *
     * ```javascript
     * router.all('/login', function (ctx) {
     *   ctx.redirect('/sign-in');
     * });
     * ```
     *
     * @param {String} source URL or route name.
     * @param {String} destination URL or route name.
     * @returns {Router}
     */

  }, {
    key: 'redirect',
    value: function redirect(source, destination) {
      cov_23hmlfyn73.f[14]++;
      cov_23hmlfyn73.s[64]++;

      if (source[0] !== '/') {
        cov_23hmlfyn73.b[14][0]++;
        cov_23hmlfyn73.s[65]++;

        source = this.url(source);
      } else {
        cov_23hmlfyn73.b[14][1]++;
      }

      // lookup destination route by name
      cov_23hmlfyn73.s[66]++;
      if (destination[0] !== '/') {
        cov_23hmlfyn73.b[15][0]++;
        cov_23hmlfyn73.s[67]++;

        destination = this.url(destination);
      } else {
        cov_23hmlfyn73.b[15][1]++;
      }

      cov_23hmlfyn73.s[68]++;
      return this.all(source, function () {
        var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(ctx) {
          return _regenerator2.default.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  cov_23hmlfyn73.f[15]++;
                  cov_23hmlfyn73.s[69]++;
                  _context2.next = 4;
                  return ctx.redirect(destination);

                case 4:
                case 'end':
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));

        return function (_x4) {
          return _ref2.apply(this, arguments);
        };
      }());
    }

    /**
     * Create and register a route.
     *
     * @param {String} path Path string.
     * @param {Array.<String>} methods Array of HTTP verbs.
     * @param {Function} middleware Multiple middleware also accepted.
     * @returns {Layer}
     * @private
     */

  }, {
    key: 'register',
    value: function register(path, methods, middleware) {
      var _this2 = this;

      var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (cov_23hmlfyn73.b[16][0]++, {});
      cov_23hmlfyn73.f[16]++;

      var router = (cov_23hmlfyn73.s[70]++, this);
      var stack = (cov_23hmlfyn73.s[71]++, this.stack);

      // support array of paths
      cov_23hmlfyn73.s[72]++;
      if (Array.isArray(path)) {
        cov_23hmlfyn73.b[17][0]++;
        cov_23hmlfyn73.s[73]++;

        path.forEach(function (p) {
          cov_23hmlfyn73.f[17]++;
          cov_23hmlfyn73.s[74]++;
          return router.register.call(router, p, methods, middleware, opts);
        });
        cov_23hmlfyn73.s[75]++;
        return this;
      } else {
        cov_23hmlfyn73.b[17][1]++;
      }

      // create route
      var route = (cov_23hmlfyn73.s[76]++, new _layer2.default(path, methods, middleware, {
        end: opts.end === false ? (cov_23hmlfyn73.b[18][0]++, opts.end) : (cov_23hmlfyn73.b[18][1]++, true),
        name: opts.name,
        sensitive: (cov_23hmlfyn73.b[19][0]++, opts.sensitive) || (cov_23hmlfyn73.b[19][1]++, this.opts.sensitive) || (cov_23hmlfyn73.b[19][2]++, false),
        strict: (cov_23hmlfyn73.b[20][0]++, opts.strict) || (cov_23hmlfyn73.b[20][1]++, this.opts.strict) || (cov_23hmlfyn73.b[20][2]++, false),
        prefix: (cov_23hmlfyn73.b[21][0]++, opts.prefix) || (cov_23hmlfyn73.b[21][1]++, this.opts.prefix) || (cov_23hmlfyn73.b[21][2]++, ""),
        ignoreCaptures: opts.ignoreCaptures
      }));

      cov_23hmlfyn73.s[77]++;
      if (this.opts.prefix) {
        cov_23hmlfyn73.b[22][0]++;
        cov_23hmlfyn73.s[78]++;

        route.setPrefix(this.opts.prefix);
      } else {
        cov_23hmlfyn73.b[22][1]++;
      }

      // add parameter middleware
      cov_23hmlfyn73.s[79]++;
      Object.keys(this.params).forEach(function (param) {
        cov_23hmlfyn73.f[18]++;
        cov_23hmlfyn73.s[80]++;
        return route.param(param, _this2.params[param]);
      });
      cov_23hmlfyn73.s[81]++;
      stack.push(route);
      cov_23hmlfyn73.s[82]++;
      return route;
    }

    /**
     * Lookup route with given `name`.
     *
     * @param {String} name
     * @returns {Layer|false}
     */

  }, {
    key: 'route',
    value: function route(name) {
      cov_23hmlfyn73.f[19]++;

      var routes = (cov_23hmlfyn73.s[83]++, this.stack);

      cov_23hmlfyn73.s[84]++;
      for (var len = routes.length, i = 0; i < len; i++) {
        cov_23hmlfyn73.s[85]++;

        if ((cov_23hmlfyn73.b[24][0]++, routes[i].name) && (cov_23hmlfyn73.b[24][1]++, routes[i].name === name)) {
          cov_23hmlfyn73.b[23][0]++;
          cov_23hmlfyn73.s[86]++;

          return routes[i];
        } else {
          cov_23hmlfyn73.b[23][1]++;
        }
      }

      cov_23hmlfyn73.s[87]++;
      return false;
    }

    /**
     * Generate URL for route. Takes a route name and map of named `params`.
     *
     * @example
     *
     * ```javascript
     * router.get('user', '/users/:id', function (ctx, next) {
     *   // ...
     * });
     *
     * router.url('user', 3);
     * // => "/users/3"
     *
     * router.url('user', { id: 3 });
     * // => "/users/3"
     *
     * router.use(function (ctx, next) {
     *   // redirect to named route
     *   ctx.redirect(ctx.router.url('sign-in'));
     * })
     * ```
     *
     * @param {String} name route name
     * @param {Object} params url parameters
     * @returns {String|Error}
     */

  }, {
    key: 'url',
    value: function url(name, params) {
      cov_23hmlfyn73.f[20]++;

      var route = (cov_23hmlfyn73.s[88]++, this.route(name));

      cov_23hmlfyn73.s[89]++;
      if (route) {
        cov_23hmlfyn73.b[25][0]++;

        var args = (cov_23hmlfyn73.s[90]++, Array.prototype.slice.call(arguments, 1));
        cov_23hmlfyn73.s[91]++;
        return route.url.apply(route, args);
      } else {
        cov_23hmlfyn73.b[25][1]++;
      }

      cov_23hmlfyn73.s[92]++;
      return new Error("No route found for name: " + name);
    }

    /**
     * Match given `path` and return corresponding routes.
     *
     * @param {String} path
     * @param {String} method
     * @returns {Object.<path, pathAndMethod>} returns layers that matched path and
     * path and method.
     * @private
     */

  }, {
    key: 'match',
    value: function match(path, method) {
      cov_23hmlfyn73.f[21]++;

      var layers = (cov_23hmlfyn73.s[93]++, this.stack);
      var layer = void 0;
      var matched = (cov_23hmlfyn73.s[94]++, {
        path: [],
        pathAndMethod: [],
        route: false
      });

      cov_23hmlfyn73.s[95]++;
      for (var len = layers.length, i = 0; i < len; i++) {
        cov_23hmlfyn73.s[96]++;

        layer = layers[i];

        cov_23hmlfyn73.s[97]++;
        if (layer.match(path)) {
          cov_23hmlfyn73.b[26][0]++;
          cov_23hmlfyn73.s[98]++;

          matched.path.push(layer);

          cov_23hmlfyn73.s[99]++;
          if ((cov_23hmlfyn73.b[28][0]++, layer.methods.length === 0) || (cov_23hmlfyn73.b[28][1]++, ~layer.methods.indexOf(method))) {
            cov_23hmlfyn73.b[27][0]++;
            cov_23hmlfyn73.s[100]++;

            matched.pathAndMethod.push(layer);
            cov_23hmlfyn73.s[101]++;
            if (layer.methods.length) {
                cov_23hmlfyn73.b[29][0]++;
                cov_23hmlfyn73.s[102]++;
                matched.route = true;
              } else {
              cov_23hmlfyn73.b[29][1]++;
            }
          } else {
            cov_23hmlfyn73.b[27][1]++;
          }
        } else {
          cov_23hmlfyn73.b[26][1]++;
        }
      }

      cov_23hmlfyn73.s[103]++;
      return matched;
    }

    /**
     * Run middleware for named route parameters. Useful for auto-loading or
     * validation.
     *
     * @example
     *
     * ```javascript
     * router
     *   .param('user', function (id, ctx, next) {
     *     ctx.user = users[id];
     *     if (!ctx.user) return ctx.status = 404;
     *     return next();
     *   })
     *   .get('/users/:user', function (ctx) {
     *     ctx.body = ctx.user;
     *   })
     *   .get('/users/:user/friends', function (ctx) {
     *     return ctx.user.getFriends().then(function(friends) {
     *       ctx.body = friends;
     *     });
     *   })
     *   // /users/3 => {"id": 3, "name": "Alex"}
     *   // /users/3/friends => [{"id": 4, "name": "TJ"}]
     * ```
     *
     * @param {String} param
     * @param {Function} middleware
     * @returns {Router}
     */

  }, {
    key: 'param',
    value: function param(_param, middleware) {
      cov_23hmlfyn73.f[22]++;
      cov_23hmlfyn73.s[104]++;

      this.params[_param] = middleware;
      cov_23hmlfyn73.s[105]++;
      this.stack.forEach(function (route) {
        cov_23hmlfyn73.f[23]++;
        cov_23hmlfyn73.s[106]++;
        return route.param(_param, middleware);
      });
      cov_23hmlfyn73.s[107]++;
      return this;
    }

    /**
     * Generate URL from url pattern and given `params`.
     *
     * @example
     *
     * ```javascript
     * var url = Router.url('/users/:id', {id: 1});
     * // => "/users/1"
     * ```
     *
     * @param {String} path url pattern
     * @param {Object} params url parameters
     * @returns {String}
     */

  }], [{
    key: 'url',
    value: function url(path, params) {
      cov_23hmlfyn73.f[24]++;
      cov_23hmlfyn73.s[108]++;

      return _layer2.default.prototype.url.call({ path: path }, params);
    }
  }]);
  return Router;
}();

exports.default = Router;
module.exports = exports['default'];